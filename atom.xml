<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>norswap</title>
    <description></description>
    <link>http://norswap.com/</link>
    <atom:link href="http://norswap.com/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>2022 Update</title>
      <description>
&lt;p&gt;This blog has been rather less active than it should have been.&lt;/p&gt;
&lt;p&gt;I, however, have been busy, working at &lt;a href=&quot;https://optimism.io&quot;&gt;Optimism&lt;/a&gt; on
&lt;a href=&quot;https://dev.optimism.io/introducing-optimism-bedrock/&quot;&gt;Bedrock&lt;/a&gt; and &lt;a href=&quot;https://medium.com/ethereum-optimism/cannon-cannon-cannon-introducing-cannon-4ce0d9245a03&quot;&gt;Cannon&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A lot of the action has instead been on &lt;a href=&quot;https://twitter.com/norswap/&quot;&gt;my Twitter&lt;/a&gt;. See in particular &lt;a href=&quot;https://twitter.com/norswap/status/1501920423662997504&quot;&gt;this
thread&lt;/a&gt; collecting the biggest hits.&lt;/p&gt;
&lt;p&gt;For discoverability and archival purpose, I&amp;#39;ve ported some of these tweet
threads on the block, backdated to the original date. Here they are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/zk-vs-optimistic&quot;&gt;ZK Rollups vs Optimistic Rollups&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/cannon-intro&quot;&gt;How Cannon Works&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/djed-stable&quot;&gt;Design of the $DJED Stablecoin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/velodrome-liquidity&quot;&gt;Velodrome and why it&amp;#39;s a superior system for incentivizing liquidity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/amm-meditations&quot;&gt;AMM Meditations üçÉ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
      </description>
      <pubDate>2022-10-24T22:00:00.000Z</pubDate>
      <link>http://norswap.com/2022-update</link>
      <guid isPermaLink="true">http://norswap.com/2022-update</guid>
    </item>
    <item>
      <title>Optimism Bedrock vs Arbitrum Nitro</title>
      <description>
&lt;p&gt;This is a really nerdy breakdown of the differences between &lt;a href=&quot;https://github.com/ethereum-optimism/optimism/blob/develop/specs/overview.md&quot;&gt;Optimism Bedrock üóø&lt;/a&gt; and &lt;a href=&quot;https://github.com/OffchainLabs/nitro&quot;&gt;Arbitrum Nitro üöÄ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is all sourced from my reading of the &lt;a href=&quot;https://github.com/OffchainLabs/nitro/blob/master/docs/Nitro-whitepaper.pdf&quot;&gt;Nitro whitepaper&lt;/a&gt;, and my intimate sensual knowledge of the Bedrock design.&lt;/p&gt;
&lt;p&gt;This actually started a Twitter thread, but grew way way too big for that.&lt;/p&gt;
&lt;p&gt;This gets very technical. If you want to follow &amp;amp; get confused, I recommend referring to the &lt;a href=&quot;https://github.com/ethereum-optimism/optimism/blob/develop/specs/overview.md&quot;&gt;Bedrock overview&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/norswap/status/1552454352316547076&quot;&gt;my presentation on our Cannon fault proof system&lt;/a&gt;, and of course the &lt;a href=&quot;https://github.com/OffchainLabs/nitro/blob/master/docs/Nitro-whitepaper.pdf&quot;&gt;Nitro whitepaper&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;With this out of the way, let&amp;#39;s dive in!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;First of all, the whitepaper is great and was a pleasure to read. I recommend checking it out for all interested.&lt;/p&gt;
&lt;p&gt;Going into this, my impression was that Bedrock and Nitro share roughly the same architecture, with some smaller differences.&lt;/p&gt;
&lt;p&gt;The paper by and large confirms this. Still, there are quite a few differences, including a few I didn&amp;#39;t expect. These are what this thread is about!&lt;/p&gt;
&lt;h1 id=&quot;a-fixed-vs-variable-block-time&quot;&gt;(A) Fixed vs variable block time&lt;/h1&gt;
&lt;p&gt;One of the most interesting and consequential things is that Nitro will work like the current version of Optimism, which has one block per transaction, and variable time between blocks.&lt;/p&gt;
&lt;p&gt;We moved away from this because it was a departure from how Ethereum works, and a pain point for devs. Bedrock will have &amp;quot;real&amp;quot; blocks with a fixed block time of 2 seconds.&lt;/p&gt;
&lt;p&gt;Irregular block times make quite a few common contracts wonky, because they keep time using blocks instead of the timestamp. This notably includes the Masterchef contract for distributing LP rewards that originated with Sushiswap.&lt;/p&gt;
&lt;p&gt;I&amp;#39;m not sure why these contracts keep the time with blocks instead of timestamps! Ethereum miners have some leeway in manipulating timestamps, but clients will by default not build upon blocks that are too far away from the wallclock time (15s in Geth), so no problem.&lt;/p&gt;
&lt;p&gt;Anyway, on Optimism this caused the &lt;a href=&quot;https://stargate.finance/&quot;&gt;StargateFinance&lt;/a&gt; incentives to run out months ahead of other chains, because they didn&amp;#39;t account for this peculiarity!&lt;/p&gt;
&lt;p&gt;The &amp;quot;one block per transaction&amp;quot; model has other issues. First, it&amp;#39;s a lot of overhead for storing the chain (one block header per tx). Second, it means the state root needs to be updated after each individual transaction.&lt;/p&gt;
&lt;p&gt;Updating the state root is a pretty expensive operation, whose cost is amortized when done over multiple transactions.&lt;/p&gt;
&lt;h1 id=&quot;b-geth-as-a-library-or-as-the-execution-engine&quot;&gt;(B) Geth as a library or as the execution engine&lt;/h1&gt;
&lt;p&gt;Nitro uses Geth &amp;quot;as a library&amp;quot; which is minimally modified with hooks to call the proper functionality.&lt;/p&gt;
&lt;p&gt;In Bedrock, a minimally modified Geth runs standalone as the &amp;quot;execution engine&amp;quot; which receives instructions from the rollup node in the same way the execution layer receives instructions from the consensus layer in Eth2. We even use the exact same API!&lt;/p&gt;
&lt;p&gt;This has some important consequences. First we‚Äôre able to use other clients than Geth, applying a similar minimal diff on top of them. This is not just theory, we already have &lt;a href=&quot;https://github.com/protolambda/erigon/tree/optimism&quot;&gt;Erigon&lt;/a&gt; pretty much ready.&lt;/p&gt;
&lt;p&gt;Second, this lets us reuse the whole Geth (or other client) stack, include at the networking layer, which enables things like peer discovery and state sync, without almost any additional dev work.&lt;/p&gt;
&lt;h1 id=&quot;c-state-storage&quot;&gt;(C) State storage&lt;/h1&gt;
&lt;p&gt;Nitro keeps some state (&amp;quot;the state of ArbOS&amp;quot;) inside a special account (itself stored within the Arbitrum&amp;#39;s chain state), using a special memory layout to map keys to storage slots.&lt;/p&gt;
&lt;p&gt;(This is purely architecture, with no user impact.)&lt;/p&gt;
&lt;p&gt;Bedrock doesn&amp;#39;t really have much state in that sense, and what little it has is stored in ordinary EVM contracts (to be fair, you could implement the ArbOS state layout using the EVM, though that&amp;#39;s not what I think they are doing).&lt;/p&gt;
&lt;p&gt;When determining/executing the next L2 block, a Bedrock replica looks at:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the header of the head of the L2 chain&lt;/li&gt;
&lt;li&gt;data read from L1&lt;/li&gt;
&lt;li&gt;some data in EVM contract on the L2 chain, currently only the L1 fee parameters&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In Bedrock, nodes can crash and immediately gracefully restart. They don&amp;#39;t need to maintain an extra databases, because all the necessary information can be found in L1 and L2 blocks. I assume Nitro works the same (the architecture makes this possible).&lt;/p&gt;
&lt;p&gt;It&amp;#39;s however apparent that Nitro does a little more bookkeeping work than Bedrock.&lt;/p&gt;
&lt;h1 id=&quot;d-l1-to-l2-message-inclusion-delay&quot;&gt;(D) L1 to L2 message inclusion delay&lt;/h1&gt;
&lt;p&gt;Nitro processes L1 to L2 messages (what we call &amp;quot;deposited transactions&amp;quot; or just &amp;quot;deposits&amp;quot;) with a 10 minutes delay. On Bedrock, they should usually be with a small confirmation depth of a few blocks (maybe 10 L1 blocks, so about 2 minutes).&lt;/p&gt;
&lt;p&gt;We do also have a parameter called &amp;quot;sequencer drift&amp;quot; that allows the timestamp of an L2 block to drift ahead of its L1 origin (L1 block that marks the end of the L1 block range from which batches and deposits are derived).&lt;/p&gt;
&lt;p&gt;We still have to decide the final value but we&amp;#39;re leaning towards 10 minutes also, meaning the worst case is 10 minutes. However, this parameter is meant to ensure liveness of the L2 chain during temporary loss of connection to L1.&lt;/p&gt;
&lt;p&gt;Usually however, deposits will be included immediately after the confirmation depth.&lt;/p&gt;
&lt;p&gt;The Nitro paper mentions that this 10 minutes delay is to avoid the deposits from disappearing on L1 due to a re-org. This made me curious about an aspect that the paper does &lt;em&gt;not&lt;/em&gt; talk about, and which is: how does the L2 chain handles L1 re-org. I think the answer is it doesn&amp;#39;t.&lt;/p&gt;
&lt;p&gt;This isn&amp;#39;t unreasonable: post-merge there is an L1 finality delay of about 12 minutes. So if it&amp;#39;s okay for deposits to lag 10/12 minutes behind, then this design works.&lt;/p&gt;
&lt;p&gt;Because Bedrock tracks closer to L1, we need to handle L1 re-orgs by re-orging L2 if needed. The confirmation depth should avoid this happening too often.&lt;/p&gt;
&lt;p&gt;Another minor difference there is that if the Nitro sequencer does not include a deposit after 10 minutes, you can &amp;quot;force include&amp;quot; it via an L1 contract call.&lt;/p&gt;
&lt;p&gt;On Bedrock, this is not necessary: it&amp;#39;s invalid to have an L2 block without including the deposits of its L1 origin.&lt;/p&gt;
&lt;p&gt;And because L2 can only be 10 minutes (sequencer drift) ahead of the origin, a chain that does not include deposits after 10 minutes is invalid, will be rejected by validators and challengeable by the fault proof mechanism.&lt;/p&gt;
&lt;h1 id=&quot;e-l1-to-l2-messages-retry-mechanism&quot;&gt;(E) L1-to-L2 messages retry mechanism&lt;/h1&gt;
&lt;p&gt;Nitro implements &amp;quot;retryable tickets&amp;quot; for L1-to-L2 messages. Say you&amp;#39;re bridging, the L1 part of the tx could work (locking your tokens) but the L2 part could fail. So you need to be able to retry the L2 part (maybe with some more gas) or you&amp;#39;ve lost your tokens.&lt;/p&gt;
&lt;p&gt;Nitro implements this in the ArbOS part of the node. In Bedrock, this is all done in Solidity itself.&lt;/p&gt;
&lt;p&gt;If you use our L1 cross-domain messenger contracts to send a transaction to L2, the transaction lands in our L2 cross-domain messenger which will record its hash, making it retryable. Nitro works the same way, it&amp;#39;s just implemented in the node.&lt;/p&gt;
&lt;p&gt;We also expose a lower-level way to do deposits, via our L1 Optimism Portal contract.&lt;/p&gt;
&lt;p&gt;This doesn&amp;#39;t give you the safety net of the L2 cross-domain messenger retry mechanism, but on the flip side, it means you can implement your own app-specific retry mechanism in Solidity. Pretty cool!&lt;/p&gt;
&lt;h1 id=&quot;f-l2-fee-algorithm&quot;&gt;(F) L2 fee algorithm&lt;/h1&gt;
&lt;p&gt;On both systems, fees have an L2 part (the execution gas, similar to Ethereum) and an L1 part (cost of L1 calldata). For its L2 fee, Nitro uses a bespoke system, while Bedrock re-uses EIP-1559. Nitro has to do this because they have the aforementioned 1 tx/block system.&lt;/p&gt;
&lt;p&gt;We still have to tune the EIP-1559 parameters to make it work well with the 2 second block time. Today, Optimism charges a low &amp;amp; flat L2 fee (the L1 fee is 99% of the price anyway). I think we might have surge pricing too, but it never kicks in in practice.&lt;/p&gt;
&lt;p&gt;An advantage of reusing EIP-1559 is that it should make it marginally easier for wallets and other tools to compute fees.&lt;/p&gt;
&lt;p&gt;The Nitro gas-metering formula is pretty elegant though, and they seem to have put a lot of thought in it.&lt;/p&gt;
&lt;h1 id=&quot;g-l1-fee-algorithm&quot;&gt;(G) L1 fee algorithm&lt;/h1&gt;
&lt;p&gt;What about L1 fees? This is a bigger difference. Bedrock uses backward-looking L1 basefee data. This data is pretty fresh, because it is delivered via the same mechanism as deposits (i.e. it&amp;#39;s almost instant).&lt;/p&gt;
&lt;p&gt;Because there&amp;#39;s still a risk that the L1 fee will spike, we charge a small multiplier of the expected cost.&lt;/p&gt;
&lt;p&gt;Fun fact: this multiplier (which we have lowered multiple times since launching the chain) is where all the current sequencer revenue come from! With EIP-4844, this will shrink, and revenues will come from (UX-preserving) MEV extraction instead.&lt;/p&gt;
&lt;p&gt;Nitro does something rather much more complicated. I don&amp;#39;t claim to understand all the intricacies of it, but the basic gist is that they have a control system that gets feedback from how much fees were actually paid on L1.&lt;/p&gt;
&lt;p&gt;This means sending transaction back from L1 to L2 with this data. If the sequencer underpaid, it can start charging users less going forward. If it overpaid, it can start charging users more.&lt;/p&gt;
&lt;p&gt;As an aside, you may wonder why we need to transmit fee data from L1 to L2. It&amp;#39;s because we want the fee scheme to be part of the protocol, and open to challenge by fault proofs. Otherwise, rogue sequencers could DoS the chain by setting arbitrarily high fees!&lt;/p&gt;
&lt;p&gt;Finally, transaction batches are compressed in both systems. Nitro charges the L1 fee based on an estimation of how well the transaction will compress. Bedrock currently doesn&amp;#39;t do this, though we plan to.&lt;/p&gt;
&lt;p&gt;Not doing this worsens the perverse incentive to cache data in L2 storage, leading to problematic state growth.&lt;/p&gt;
&lt;h1 id=&quot;h-fault-proof-instruction-set&quot;&gt;(H) Fault proof instruction set&lt;/h1&gt;
&lt;p&gt;Fault/fraud proofs! Quite a few differences between what Nitro does and how Cannon (the fault proof system we&amp;#39;re currently implementing to sit on top of Bedrock) will work.&lt;/p&gt;
&lt;p&gt;Bedrock compiles to the MIPS instruction set architecture (ISA), Nitro compiles to WASM. They seem to do quite a few more transformation on the output than we do, owing to compiling to a subset of WASM which they call WAVM.&lt;/p&gt;
&lt;p&gt;For instance, they replace floating point (FP) operations by library calls. I suspect that they didn&amp;#39;t want to implement the gnarly FP operations in their on-chain interpreter. We do this too, but the Go compiler takes care of it for us!&lt;/p&gt;
&lt;p&gt;Another example: unlike most ISA that only has jumps, WASM has proper (potentially nested) control flow (if-else, while, etc). The conversion from WASM to WAVM removes this to go back to jumps, again probably for the sake of interpreter simplicity.&lt;/p&gt;
&lt;p&gt;They also compile a mix of Go, C &amp;amp; Rust to WAVM (in different &amp;quot;modules&amp;quot;), while we do Go only. Apparently WAVM allows &amp;quot;the languages&amp;#39; memory management not to interfere&amp;quot;, which I interpret as each WAVM module getting its own heap.&lt;/p&gt;
&lt;p&gt;Something I&amp;#39;m curious about: how they deal with concurrency and garbage collection. We&amp;#39;re able to avoid concurrency fairly easily in minigeth (our stripped down geth) so maybe that part is easy (more on how Bedrock and Nitro use geth at the end of this article).&lt;/p&gt;
&lt;p&gt;However, one of the only transformation we do on MIPS is to patch out garbage collection calls. This is because garbage collection uses concurrency in Go, and concurrency and fault proofs don&amp;#39;t go well together. Does Nitro do the same thing?&lt;/p&gt;
&lt;h1 id=&quot;i-bisection-game-structure&quot;&gt;(I) Bisection game structure&lt;/h1&gt;
&lt;p&gt;The Bedrock fault proof will work on a run of minigeth that verifies the validity of a state root (actually an &lt;a href=&quot;https://github.com/ethereum-optimism/optimism/blob/ab7ed0d43d77d2fd6723d0f4b9b056daca94071f/specs/proposals.md#l2-output-root-proposals-specification&quot;&gt;output root&lt;/a&gt;) posted to L1. Such state roots are not posted frequently, and a such encompass the validation of many blocks/batches.&lt;/p&gt;
&lt;p&gt;The bisection game in Cannon is played on the execution trace of this (long) run.&lt;/p&gt;
&lt;p&gt;In Nitro, on the other hand, state roots are posted with each set of batches (&lt;em&gt;RBlock&lt;/em&gt;) posted to L1.&lt;/p&gt;
&lt;p&gt;The bisection game in Nitro is split in two parts. First find the first state root that challenger and defender disagreee on. Then, find the first WAVM instruction they disagree on in the validator run (which only validates a single transaction).&lt;/p&gt;
&lt;p&gt;The trade-off is more hashing during Nitro execution (see (A) above), but less hashing during the fault proof: each step in the bisection game over an execution trace requires submitting a Merkle root of the memory.&lt;/p&gt;
&lt;p&gt;Structure the fault proof like this also reduces the concern that memory will balloon in the validator, potentialy exceeding the 4G memory limit we currently have for running MIPS.&lt;/p&gt;
&lt;p&gt;This isn&amp;#39;t a hard problem to fix, but we need to be careful in Bedrock, whereas there is probably no chance that validating a single transaction can ever approach the limit.&lt;/p&gt;
&lt;h1 id=&quot;j-preimage-oracle&quot;&gt;(J) Preimage oracle&lt;/h1&gt;
&lt;p&gt;The validator software used for fault proofs need to read data from L1 and L2. Because it will ultimately &amp;quot;run&amp;quot; on L1 (though only a single instruction), the L2 itself needs to be accessed via L1 - via the state roots &amp;amp; block hashes posted to L1.&lt;/p&gt;
&lt;p&gt;How do you read from the state or chain (whether L1 or L2)?&lt;/p&gt;
&lt;p&gt;A Merkle root node is a hash of its children, so if you can request a preimage, you can traverse the whole state tree. Similarly, you can traverse the whole chain backwards by requesting the preimage of a block header. (Each block header contains the hash of its parent.)&lt;/p&gt;
&lt;p&gt;When executing on-chain, these preimages can be presupplied to the WAVM/MIPS interpreter in advance. (When executing off-chain, you can read the L2 state directly!)&lt;/p&gt;
&lt;p&gt;(Note that you only ever need to access one such preimage, because on-chain you only execute one instruction!)&lt;/p&gt;
&lt;p&gt;So that&amp;#39;s how you read from L2, both on Nitro and Bedrock.&lt;/p&gt;
&lt;p&gt;You need to do something similar for L1 however. Because transaction batches are stored in L1 calldata, which is not accessible from L1 smart contracts.&lt;/p&gt;
&lt;p&gt;Nitro stores the hashes of its batches in an L1 contract (which is why their &amp;quot;Sequencer Inbox&amp;quot; is a contract and not an EOA like for Bedrock). So they at least need to do that, I&amp;#39;m not sure why it wasn&amp;#39;t mentionned.&lt;/p&gt;
&lt;p&gt;In Bedrock, we don&amp;#39;t even store the batches hash (leading to some gas savings). Instead, we walk back the L1 chain using the L1 block headers, then walk down the transaction Merkle root to find the batches in the calldata.&lt;/p&gt;
&lt;p&gt;(Again, on-chain, at most a single preimage needs to be supplied.)&lt;/p&gt;
&lt;p&gt;Section 4.1 ends with a paragraph that reminds us that &lt;a href=&quot;https://twitter.com/EdFelten/status/1488632545457618952&quot;&gt;Arbitrum invented the &amp;quot;hash oracle trick&amp;quot;&lt;/a&gt;. Credit where credit is due. Insecurity shouldn&amp;#39;t be a reason to forget about the Arbitrum team&amp;#39;s contributions!&lt;/p&gt;
&lt;h1 id=&quot;k-large-preimages&quot;&gt;(K) Large preimages&lt;/h1&gt;
&lt;p&gt;The paper also tells us that the fixed upper bound for an L2 preimage is 110kb, but does not quote the figure for L1.&lt;/p&gt;
&lt;p&gt;In Cannon, we have something called &amp;quot;the large preimage problem&amp;quot;, because one of the potential preimage to invert is the receipts preimage, which contains all the data emitted by Solidity events (&amp;quot;logs&amp;quot; at the EVM level).&lt;/p&gt;
&lt;p&gt;In the receipts, all the log data is concatenated together. This means an attacker could emit a ton of logs, and create an incredibly large preimage.&lt;/p&gt;
&lt;p&gt;We need to read logs because we use them to store deposits (L2-to-L1 messages). This is not strictly necessary: Nitro avoids the issue by storing a hash of the message (it&amp;#39;s more complicated than this, but the end result is the same).&lt;/p&gt;
&lt;p&gt;We don&amp;#39;t store a hash because of the significant cost to compute and store it. Around 20k gas to store and 6 gas per 32 bytes to compute. An average transaction is about 500 bytes, making a batch of 200 transactions cost about 20k gas to hash as well. At 2k$ ETH and 40 gwei basefee, the extra hashing and storage costs 3.2$. At 5k$ ETH and 100 gwei that&amp;#39;s 20$.&lt;/p&gt;
&lt;p&gt;Our current plan to solve the large preimage problem is to use a simple zk-proof to prove the value of some bytes within the preimage (since that&amp;#39;s all an instruction needs to access in practice).&lt;/p&gt;
&lt;h1 id=&quot;l-batches--state-roots&quot;&gt;(L) Batches &amp;amp; state roots&lt;/h1&gt;
&lt;p&gt;Nitro ties batches with state roots very strongly. They post a set of batches in an &lt;em&gt;RBlock&lt;/em&gt; which also contains a state root.&lt;/p&gt;
&lt;p&gt;Bedrock on the other hands posts its batches separately from the state roots. The key advantage is again reduced cost to posting batches (no need to interact with a contract or store data). This lets us post batches more often, and state roots less often.&lt;/p&gt;
&lt;p&gt;Another consequence is that with Nitro, should an RBlock be challenged, the transactions it contains will not be replayed on the new chain (new correct state roots).&lt;/p&gt;
&lt;p&gt;In Bedrock, we&amp;#39;re currently debating what to do in the case where a state root gets successfully challenged: replay old transactions on top of the new state roots, or full rollback? (The current implementation implies a full rollback, but it‚Äôs likely to be changed before fault proofs are rolled out.)&lt;/p&gt;
&lt;h1 id=&quot;m-misc&quot;&gt;(M) Misc&lt;/h1&gt;
&lt;p&gt;Smaller, less consequential differences:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(i)&lt;/strong&gt; Nitro allows individual transactions posted by the sequencer to be &amp;quot;garbage&amp;quot; (invalid signatures, etc). To minimize the changes to Geth, we always throw out batches that contain any garbage.&lt;/p&gt;
&lt;p&gt;The sequencer is always able to find those in advance, so lingering garbage entails either misbheaviour or bug. The sequencer runs the same code as the fault proof, so their definitions of what&amp;#39;s invalid should be identical.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(ii)&lt;/strong&gt; Nitro introduces precompile contracts, notably for L2-to-L1 message passing. We currently don&amp;#39;t use any precompiles, preferring them &amp;quot;pre-deploys&amp;quot;, i.e. actual EVM contracts that exist at special addresses from the genesis block.&lt;/p&gt;
&lt;p&gt;Turns out we can do what we need just fine in the EVM, and this makes the node logic slightly simpler. We&amp;#39;re not religiously opposed to precompiles though, maybe we&amp;#39;ll need one at some point.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(iii)&lt;/strong&gt; The Nitro fault proof does a d-way dissection. The proof-of-concept Cannon implementation uses a bisection, but we&amp;#39;ll probably move to a d-way dissection too.&lt;/p&gt;
&lt;p&gt;There is a very nice formula in the paper that explains the optimal value of &lt;em&gt;d&lt;/em&gt; based on fixed and variable costs. I wish they had included concrete examples of how they estimate these costs in practice however!&lt;/p&gt;
&lt;h1 id=&quot;coda&quot;&gt;Coda&lt;/h1&gt;
&lt;p&gt;No grand conclusion! Or rather: draw your own :)&lt;/p&gt;
&lt;p&gt;If you enjoyed this, follow me &lt;a href=&quot;https://twitter.com/norswap&quot;&gt;on Twitter&lt;/a&gt; for
more of the same and be notified of new articles.&lt;/p&gt;
      </description>
      <pubDate>2022-10-02T05:00:00.000Z</pubDate>
      <link>http://norswap.com/bedrock-vs-nitro</link>
      <guid isPermaLink="true">http://norswap.com/bedrock-vs-nitro</guid>
    </item>
    <item>
      <title>AMM Meditations üçÉ</title>
      <description>
&lt;p&gt;This was originally a &lt;a href=&quot;https://twitter.com/norswap/status/1548122970903654411&quot;&gt;tweet thread&lt;/a&gt; that I have reproduced here for
discoverability and archive purposes (the copy was done on 25 October 2022).&lt;/p&gt;
&lt;p&gt;I&amp;#39;ve only slightly reformatted the text (mostly links), otherwise this is the
original version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;1/ I wonder how many people realize a volatile-vs-stable AMM position is an
anti-leveraged position whose value varies with the square root of the change in
price of the volatile asset. (In exchange for this reduced exposure, you get
yield.)&lt;/p&gt;
&lt;p&gt;2/ If the price of ETH is multiplied by X (e.g. X=4 or X=1/4), the value of an
ETH-USD position will be multiplied by sqrt(X) (e.g. 2 or 1/2).&lt;/p&gt;
&lt;p&gt;3/ Why? Because of the x*y=k equation. Assuming x is the volatile and y is the
stable: If x is multipled by X (selling a bunch of the volatile), y must be
divided by X such that x*X*y/X=k.&lt;/p&gt;
&lt;p&gt;4/ The price of the volatile is given by y/x. After selling the volatile:
(y/X)/(x*X) = (y/x)/X^2.&lt;/p&gt;
&lt;p&gt;The value of the LP position is initially 2*y. After selling the volatile:
2*y/X.&lt;/p&gt;
&lt;p&gt;So the price is divided X^2, but the LP position value only by X.&lt;/p&gt;
&lt;p&gt;5/ However, the impermanent loss is only (1 + X)/2 - sqrt(X), because only half
of the initial LP position&amp;#39;s value was in the volatile asset.&lt;/p&gt;
&lt;p&gt;(This number is a multiplier of initial LP position value.)&lt;/p&gt;
&lt;p&gt;6/ How bad does impermanent loss get?&lt;/p&gt;
&lt;p&gt;On the up side, ~2.5% for a 50% price increase, ~8.5% for a 2x, 50% for a 4x.&lt;/p&gt;
&lt;p&gt;On the down side, ~4.2% for a 50% price decrease (halving), 12.5% for a 75%
decrease (price divided by 4).&lt;/p&gt;
&lt;p&gt;7/ Notice the asymmetry: you lose less on the down side, but that&amp;#39;s because you
can never lose more than 50% of the initial LP value (if you held and the
volatile went to 0, you&amp;#39;d be left with 50c on the dollar).&lt;/p&gt;
&lt;p&gt;8/ You can ask google &lt;a href=&quot;https://www.google.com/search?q=(1%2BX)/2%20-%20sqrt(X)&quot;&gt;to plot this function&lt;/a&gt; btw (make sure to zoom out
the plot).&lt;/p&gt;
&lt;p&gt;9/ Note that these numbers are slightly different (larger) than what you&amp;#39;d get
with a calculator like &lt;a href=&quot;https://baller.netlify.app&quot;&gt;https://baller.netlify.app&lt;/a&gt;,
because they&amp;#39;re multiplier (%) of the initial LP position value, whereas the
calculator gives you a % of the asset value if held.&lt;/p&gt;
&lt;p&gt;10/ Anyway, what do these numbers mean? It means that if you expect that the
price could move 4x up or down, you should be getting 50% APY. In a world where
$ETH can do that, so can most tokens.&lt;/p&gt;
&lt;p&gt;11/ But who&amp;#39;s getting that? Maybe if you&amp;#39;re lucky and you&amp;#39;re super early to a
good project. Otherwise LPing on a inflationary shitcoin that is slowly or
not-so-slowly going to 0 ‚Äî but then you have another problem.&lt;/p&gt;
&lt;p&gt;12/ LPing a a volatile-stable pair is a a sucker&amp;#39;s game, and I do not get why
people do it.&lt;/p&gt;
&lt;p&gt;UniV3 was going to fix this, but &lt;a href=&quot;https://twitter.com/0xdoug/status/1512296324036759557&quot;&gt;it&amp;#39;s not clear anybody is consistently beating
impermanent loss in ETH-USDC&lt;/a&gt; (500M+ TVL).&lt;/p&gt;
&lt;p&gt;13/ On the other hand, stock market (order book) market makers consistently make
money. On-chain liquidity that does not rely on off-chain agents IS NOT A SOLVED
ISSUE.&lt;/p&gt;
      </description>
      <pubDate>2022-07-15T22:00:00.000Z</pubDate>
      <link>http://norswap.com/amm-meditations</link>
      <guid isPermaLink="true">http://norswap.com/amm-meditations</guid>
    </item>
    <item>
      <title>Velodrome and why it&#39;s a superior system for incentivizing liquidity</title>
      <description>
&lt;p&gt;This was originally a &lt;a href=&quot;https://twitter.com/norswap/status/1533991540896321536&quot;&gt;tweet thread&lt;/a&gt; that I have reproduced here for
discoverability and archive purposes (the copy was done on 24 October 2022).&lt;/p&gt;
&lt;p&gt;I&amp;#39;ve only slightly reformatted the text (mostly links), otherwise this is the
original version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;1/54üßµ Thread on &lt;a href=&quot;https://twitter.com/VelodromeFi&quot;&gt;@VelodromeFi&lt;/a&gt; and why it&amp;#39;s a superior system for incentivizing
liquidity.&lt;/p&gt;
&lt;p&gt;2/ Liquidity is super important for project tokens. A lack of liquidity makes
the token price too volatile. It also prevents investors for exiting, which
makes them wary to invest in the first place.&lt;/p&gt;
&lt;p&gt;3/ (And more cynically, such a liquidity pool also doubles as another use case
for the token, to prevent excessive selling.)&lt;/p&gt;
&lt;p&gt;4/ The problem is that, for unpegged pairs, being a liquidity provider (LP)
sucks, because of impermanent loss (IL). Price goes up? You would have been
better holding and not LPing. Price goes down? Same thing.&lt;/p&gt;
&lt;p&gt;5/ As an LP, you are the counterparty of adversely selected trades. You end up
owning more tokens when price decreases, and less tokens when price increases.&lt;/p&gt;
&lt;p&gt;6/ The IL numbers are not egregious, but can easily outpace fee APY. You can
play with this app to get a sense:
&lt;a href=&quot;https://baller.netlify.app/&quot;&gt;https://baller.netlify.app/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;7/ For this reason, projects need to incentivize liquidity. Usually, this is
done by bestowing tokens on LPs, to increase APY and make IL risk worthwhile.&lt;/p&gt;
&lt;p&gt;8/ In this context, Velodrome and its predecessors/competitiors (&lt;a href=&quot;https://twitter.com/CurveFinance&quot;&gt;@CurveFinance&lt;/a&gt; +
&lt;a href=&quot;https://twitter.com/ConvexFinance&quot;&gt;@ConvexFinance&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/solidlyexchange&quot;&gt;@solidlyexchange&lt;/a&gt;) offer two things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A marketplace for liquidity: no need to roll you own pools &amp;amp; incentive logic,
easy to advertise to prospective LPs&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;9/&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;The opportunity to purchase 1$ worth of incentive for less than 1$ worth of
project token.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;10/ How does that work? Every voting period (one week for Velodrome), token
rewards ($VELO) are emitted and distributed amongst the LPs of the liquidity
pools on velodrome.&lt;/p&gt;
&lt;p&gt;11/ The amount of rewards per pool is decided by a vote. A pool receives an
amount of reward proportional to its share of the total vote. To vote, users
have to lock their $VELO (for up to 4 years, longer locks beget more voting
power).&lt;/p&gt;
&lt;p&gt;12/ Multiple strategies are possible. Projects can just acquire $VELO directly
and lock it: this lets them direct a stream of future emissions to their pools.
The point being for the price paid for $VELO will be less than the value of all
future emissions.&lt;/p&gt;
&lt;p&gt;13/ This can also be good if projects are more confident about the future price
of $VELO than of their own token&amp;#39;s. Instead of printing more and more token for
liquidity rewards (creating a death spiral), they can simply rely on the
emissions.&lt;/p&gt;
&lt;p&gt;14/ Alternatively, they can &amp;quot;bribe&amp;quot; existing lockers for their votes, by
assigning them rewards in their project tokens. This can be appealing to
projects, even early on, because they don&amp;#39;t need to sell a big chunk of project
token at once to finance the purchase of $VELO.&lt;/p&gt;
&lt;p&gt;15/ Here too, there is a possibility to get 1$ of $VELO LP reward for less than
1$ of project token bribe.&lt;/p&gt;
&lt;p&gt;To make a profit (and ignoring at the moment fees and rebases), lockers want to
earn more per locked $VELO than the dilution created by the $VELO emissions.&lt;/p&gt;
&lt;p&gt;16/ Each emitted $VELO dilutes holders by (1 / (oldTotalSupply + 1)). So the
minimum non-dilutive bribe per $VELO bribed is (veloPrice * veloEmitted * (1 /
(oldTotalSupply + 1)).&lt;/p&gt;
&lt;p&gt;17/ If every $VELO was locked and its vote was bribe-sensitive, you&amp;#39;d have to
bribe one $VELO worth per $VELO emitted.&lt;/p&gt;
&lt;p&gt;The key to capital efficiency for projects here is that not all $VELO is locked
(only ~50% atm, I expect this to increase).&lt;/p&gt;
&lt;p&gt;18/ Furthermore, not every locker is bribe-sensitive: project that bought $VELO
to incentivize their pool will not vote on other pools.&lt;/p&gt;
&lt;p&gt;Also $VELO locked for less than 4 years does not get maximum voting power.&lt;/p&gt;
&lt;p&gt;19/ Therefore, in the worst/best case (depending on whose perpective you adopt),
projects get a discount by diluting non locked $VELO, bribe-insensitive $VELO,
and (to a smaller extent) short-duration $VELO lockers.&lt;/p&gt;
&lt;p&gt;20/ We should also mention that $VELO lockers also benefit from a &amp;quot;rebase&amp;quot;:
token accrued every voting period that are supposed to protect them from
dilution. The rebase amount for each voting period is given by this formula:&lt;/p&gt;
&lt;p&gt;21/ (veVELO.totalSupply √∑ VELO.totalsupply)¬≥ √ó 0.5 √ó Emissions&lt;/p&gt;
&lt;p&gt;So if half of all $VELO is locked, lockers will collectively received 1/16
(6.25%) of all emissions as extra $VELO. This would be 36% at 90% locked and 50%
at 100% locked.&lt;/p&gt;
&lt;p&gt;22/ Why do I say &amp;quot;supposed&amp;quot; above? Well &lt;a href=&quot;https://twitter.com/norswap/status/1498358050620514304&quot;&gt;just like in OlympusDAO&lt;/a&gt;, rebases just
make you run in place faster.&lt;/p&gt;
&lt;p&gt;However, they do have the net effect of diluting non-locked $VELO faster
compared to locked $VELO.&lt;/p&gt;
&lt;p&gt;23/ Note that bribe-insensitive $VELO lockers (usually projects) are not
necessarily worse for wear: as stated above, the purchasing assumption was that
the total value of future emissions would exceed the initial purchase price.&lt;/p&gt;
&lt;p&gt;24/ $VELO non-lockers could also be alright, assuming they are $VELO LPs (the
only other use case for $VELO at the moment) and that sufficient emissions are
directed toward their pool.&lt;/p&gt;
&lt;p&gt;25/ The (veloPrice * veloEmitted * (1 / (oldTotalSupply + 1)) formula (which
actually needs to be adjusted for the rebase!) from above merely represents a
level of interest for bribes.&lt;/p&gt;
&lt;p&gt;26/ This level is not particularly an attractor however. Prices could be lower
if there too much emissions compared to projects appetite for liquidity rewards.&lt;/p&gt;
&lt;p&gt;If that&amp;#39;s not the case, the bribes total should be higher as projects compete
for these emissions.&lt;/p&gt;
&lt;p&gt;27/ In fact, if the demand for incentives outpaces the $VELO emissions, this
should in theory drive the bribe per $VELO emitted close to the price of $VELO.
Or even slightly above ‚Äî as there is value in the convience of a turnkey
liquidity mining solution.&lt;/p&gt;
&lt;p&gt;28/ Note here that $VELO being locked has an impact. If it wasn&amp;#39;t, then bribes
being below the level of interest above for too long (because demand for
liquidity reward is too low) would cause people to sell $VELO.&lt;/p&gt;
&lt;p&gt;29/ A falling $VELO price cause the total values of emissions to fall, which
would bring it back towards demand.&lt;/p&gt;
&lt;p&gt;That system would be self-regulating, which the current one isn&amp;#39;t because of the
lock. I&amp;#39;m not sure which one is actually better for the long-term price of the
token!&lt;/p&gt;
&lt;p&gt;30/ So we&amp;#39;ve just described a system where projects save money, lockers make
money and LPs (include $VELO LPs) make money.&lt;/p&gt;
&lt;p&gt;Have we broken financial common sense? Is this a good old ponzu? Who foots the
bill?&lt;/p&gt;
&lt;p&gt;31/ For one, users via fees, which accrue to the lockers. But that&amp;#39;s far from
the whole story in the short/medium-term.&lt;/p&gt;
&lt;p&gt;Instead I think most of these profits come from the value of the $VELO token
itself.&lt;/p&gt;
&lt;p&gt;32/ Just like $BTC (or in fact $USD) are not &amp;quot;backed&amp;quot; by anything, so is $VELO.
i.e. there is no redemption guarantee beyond what you can get on the market
(within the limitation of available liquidity, underscoring again why this is so
important).&lt;/p&gt;
&lt;p&gt;33/ Instead, a good tokenomics analysis must look at reflective loops,
especially under extreme conditions.&lt;/p&gt;
&lt;p&gt;34/ So what could go wrong? The price could tank. (e.g. as a bear market rolls
around)&lt;/p&gt;
&lt;p&gt;35/ One bad thing about $VELO (and $CRV) is that its cashflows are mostly
effectively denominated in $VELO. i.e. the willingness of projects to bribe is
proportional to the market value of of emissions. So when the $VELO price tanks,
so should bribes.&lt;/p&gt;
&lt;p&gt;36/ The iron rule (in a rational world...) is that the total value of bribes
should never exceed the value of $VELO emitted through the vote of bribed
lockers (+ a small premium representing the usefulness of the service, and
eventually some inertia).&lt;/p&gt;
&lt;p&gt;37/ Now if the total bribe value is lower than the emitted $VELO (through bribed
lockers), then the total bribe value does not need to decrease.&lt;/p&gt;
&lt;p&gt;However I would rate this unlikely in the long term, if we consider a situation
where the price just decreased significantly.&lt;/p&gt;
&lt;p&gt;38/ (Somewhat similarly, projects saving money on accumulated $VELO depends on
the value of all future emissions.)&lt;/p&gt;
&lt;p&gt;39/ This is somewhat mitigated by the fact that fees are independent of $VELO
price. This could help moderate downdrafts, or at least help establish a price
zone where $VELO is &amp;quot;cheap&amp;quot;.&lt;/p&gt;
&lt;p&gt;40/ This is a place where Velodrome (&amp;amp; Solidly) markedly improve on Curve, as
the fees accruing to the lockers brings price-independent value to the token.&lt;/p&gt;
&lt;p&gt;41/ As an interesting data point, over the past 14 days, &lt;a href=&quot;https://dune.com/rplust/Vote-Locked-Convex-Token-(vlCVX)-Bribes&quot;&gt;Votium bribes for
Convex lockers&lt;/a&gt; were ~7.6M while &lt;a href=&quot;https://dune.com/mrblock_buidl/Curve.fi&quot;&gt;total curve fees&lt;/a&gt;
were ~1.1M.&lt;/p&gt;
&lt;p&gt;42/ Another moderating force on the downside is that projects may be driven to
accumulate when the price decreases.&lt;/p&gt;
&lt;p&gt;Why would they do this?&lt;/p&gt;
&lt;p&gt;43/ For one, the original thesis remains unchanged: since emissions are
denominated in $VELO, the savings remains similar given a flat price.&lt;/p&gt;
&lt;p&gt;(And even better if they anticipate the price slump to be temporary.)&lt;/p&gt;
&lt;p&gt;44/ The second reason is that the drop in price likely saturated the bribe
capacity it wasn&amp;#39;t already (see &amp;quot;iron rule&amp;quot; above). Emissions can no longer be
purchased without overspending. Accumulating $VELO is the only avenue left to
secure discounted liquidity rewards.&lt;/p&gt;
&lt;p&gt;45/ (In this case, by amortizing the initial purchase over time via the value of
future emissions.)&lt;/p&gt;
&lt;p&gt;46/ So as you can see, there are some moderating factors on the downside, and no
downwards spiral type effects.&lt;/p&gt;
&lt;p&gt;47/ However I don&amp;#39;t love that returns are mostly $VELO denominated. This means
that outside of periods of very low price (where fees effectively set a floor)
and periods of accumulation, the price is mostly beholden to external forces
(macro &amp;amp; cycles).&lt;/p&gt;
&lt;p&gt;48/ That being said, it&amp;#39;s quite possible that we are entering one such period of
accumulation as Velodrome just launched and Optimism is growing rapidly.&lt;/p&gt;
&lt;p&gt;49/ There are many other interesting things I&amp;#39;d love to think &amp;amp; talk about on
the subject of Velodrome (e.g. how $VELO is locked as veNFT and what that
entails, or what a Convex-style layer could look like), but this is already
super long, so I&amp;#39;ll stop here.&lt;/p&gt;
&lt;p&gt;50/ I hope I did convince you that Velodrome is a good liquidity incentive
system, and that it at least deserves your attention!&lt;/p&gt;
&lt;p&gt;51/ Obviously, none of this is financial advice. Don&amp;#39;t trust what a random
internet stranger has to say, validate.&lt;/p&gt;
&lt;p&gt;Disclaimers: I have small positions in both $VELO and $CRV/$CVX. I also worked
with the Velodrome team in my capacity as an OP Labs employee.&lt;/p&gt;
&lt;p&gt;52/ A few useful links to conclude:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/jpn_memelord/status/1533080509462487049&quot;&gt;Dune dashboard with TVL &amp;amp; usage metrics&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://vfat.tools/optimism/velodrome/&quot;&gt;vfat Velodrome farming calculator&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.velodrome.finance/tokenomics#emission-schedule&quot;&gt;Emission schedule&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
      </description>
      <pubDate>2022-06-06T22:00:00.000Z</pubDate>
      <link>http://norswap.com/elodrome-liquidity</link>
      <guid isPermaLink="true">http://norswap.com/elodrome-liquidity</guid>
    </item>
    <item>
      <title>Design of the $DJED Stablecoin</title>
      <description>
&lt;p&gt;This was originally a &lt;a href=&quot;https://twitter.com/norswap/status/1526004123811794944&quot;&gt;tweet thread&lt;/a&gt; that I have reproduced here for
discoverability and archive purposes (the copy was done on 24 October 2022).&lt;/p&gt;
&lt;p&gt;I&amp;#39;ve only slightly reformatted the text (mostly links), otherwise this is the
original version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;1/16/ Earlier this week, &lt;a href=&quot;https://twitter.com/liamihorne&quot;&gt;@liamihorne&lt;/a&gt; asked if anybody knew about the
design of the $DJED &amp;quot;algorithmic&amp;quot; stablecoin from @COTInetwork&lt;/p&gt;
&lt;p&gt;I was curious, so I gave it a look...&lt;/p&gt;
&lt;p&gt;2/ The stablecoin is not so much algorithmic as it is overcollateralized in a
way that separates minting from collateralization.&lt;/p&gt;
&lt;p&gt;3/ On the minting side, users can mint $DJED (stable) for collateral at 100%
capital efficiency, if the supply is at least 400% collateralized (otherwise,
you can&amp;#39;t mint). In this case, the collateral is $ADA, so if $ADA is worth 100$,
you get 100 $DJED back per $ADA.&lt;/p&gt;
&lt;p&gt;4/ On the collateralization side, users can mint $SHEN for $ADA. As I
understand, $SHEN represents ownership of the $ADA held by the protocol on top
of 100% $DJED collateralization, and can be redeemed for that underlying.&lt;/p&gt;
&lt;p&gt;5/ To preserve stability, $SHEN cannot be redeemed when the collateralization
ration (CR) falls under 400%. It also cannot be minted when CR is over 800% (to
avoid dilution of existing holders).&lt;/p&gt;
&lt;p&gt;6/ This design is perfectly safe (as far as my basic understanding goes): the
stablecoin is overcollateralized, and if you fall below 400% CR, $SHEN holder
can&amp;#39;t remove collateral.&lt;/p&gt;
&lt;p&gt;7/ At that point it would take a 75% $ADA price drop for $DJED to be
uncollateralized. I must also assume the $ADA can be liquidated if approaching
100% CR (potentially pretty bad for $ADA price if the protocol is successful).&lt;/p&gt;
&lt;p&gt;8/ Additionally, every action from this point onward can only improve the CR:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;If users redeem $DJED for $ADA, CR goes up.&lt;/li&gt;
&lt;li&gt;If users mint $SHEN, CR goes up.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So quite the opposite of a death spiral.&lt;/p&gt;
&lt;p&gt;9/ For users, this is just a fairly unremakable overcollateralized stablecoin.
One exception: if you&amp;#39;re a whale, you can get a lot of stables for your $ADA
without incurring slippage.&lt;/p&gt;
&lt;p&gt;10/ There is also an argument that this avoids liquidaton cascades. I&amp;#39;m not
entirely convinced, since you still have the problem in extreme cases (which is
when cascades occur) when you approach 100% CR.&lt;/p&gt;
&lt;p&gt;11/ For $SHEN minters ‚Äî if I&amp;#39;m understanding is correct ‚Äî you&amp;#39;re essentially
levered long $ADA. If $ADA goes up, you own your share of the &amp;gt; 100% pot when
you joined + what passes into this pot due to price increase.&lt;/p&gt;
&lt;p&gt;12/ e.g. if people bought $DJED for $ADA at 100$, and $ADA goes up to $200, then
only half the original $ADA is necessary to collateralize the $DJED at 100%, the
other half passes to the part of the collateral that can be redeemed by $SHEN
holders.&lt;/p&gt;
&lt;p&gt;13/ On the flip side, if $ADA drops, you&amp;#39;re bearing not only the losses of the &amp;gt;
100% pot, but also the losses of the $ADA that uses to 100% collateralize the
$DJED.&lt;/p&gt;
&lt;p&gt;14/ $SHEN minters also have a claim to (some of?) the fees generated by the
protocol.&lt;/p&gt;
&lt;p&gt;15/ Something interesting is that due to the fact that $SHEN cannot be redeemed
&amp;lt; 400% CR, you probably can buy it at a discount on an AMM at that time (the
discount accouting for the lack of liquidity). This is actually a good thing
that promotes recollateralization.&lt;/p&gt;
      </description>
      <pubDate>2022-05-15T22:00:00.000Z</pubDate>
      <link>http://norswap.com/djed-stable</link>
      <guid isPermaLink="true">http://norswap.com/djed-stable</guid>
    </item>
    <item>
      <title>How Cannon Works</title>
      <description>
&lt;p&gt;This was originally a &lt;a href=&quot;https://twitter.com/norswap/status/1502085000967061504&quot;&gt;tweet thread&lt;/a&gt; that I have reproduced here for
discoverability and archive purposes (the copy was done on 23 October 2022).&lt;/p&gt;
&lt;p&gt;I&amp;#39;ve only slightly reformatted the text (mostly links), otherwise this is the
original version.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;With the Cannon bug bounty out, it&amp;#39;s time for me to take my best stab at
describing what it is, and how it works.&lt;/p&gt;
&lt;p&gt;Cannon is our next-gen EVM-equivalent fault proof system. It&amp;#39;s what will keep
your funds secure when you use Optimism. Read to know more!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://norswap.com/cannon-intro/op-cannon.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;1/44 What to expect?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Recap on optimistic rollups / fault proofs&lt;/li&gt;
&lt;li&gt;Short history of fault proofs at Optimism&lt;/li&gt;
&lt;li&gt;Most thorough explanation of Cannon (fault proofs?) to ever grace Twitter ‚Äî quite technical, but approachable&lt;/li&gt;
&lt;li&gt;My longest twitter thread to date&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;LET&amp;#39;S FUCKING GO&lt;/p&gt;
&lt;p&gt;2/ Optimistic rollups in brief: users send txs to sequencer. Sequencer executes
transactions and creates L2 blocks. It also (a) &amp;quot;rolls up&amp;quot; transaction into
batches submitted to L1 (as calldata) and (b) submits output hashes (which we&amp;#39;ll
equate to L2 block hashes here) to L1.&lt;/p&gt;
&lt;p&gt;3/ Validators follow the L1 chain, get txs from batches, re-execute them, and
compare the resulting block hashes to the ones submitted by the sequencer.&lt;/p&gt;
&lt;p&gt;If there&amp;#39;s a mismatch, they challenge the incorrect block hash via a &lt;em&gt;fault
proof&lt;/em&gt;. This is where Cannon comes in.&lt;/p&gt;
&lt;p&gt;4/ (I&amp;#39;m simplifying on purpose here, you can also send L1-to-L2 and L2-to-L1
txs, such as deposits and withdrawals. But this is isn&amp;#39;t crucial to this
explanation.)&lt;/p&gt;
&lt;p&gt;5/ A rollups&amp;#39; fault proof system is a way to prove on the L1 chain (i.e.
&lt;em&gt;trustlessly&lt;/em&gt;) that processing the txs from an L2 block doesn&amp;#39;t yield the block
whose hash was submitted by the sequencer.&lt;/p&gt;
&lt;p&gt;6/ (Crucially, the L2 block includes the state root: a hash of the L2 state
after executing the txs in the block. This will typically be apple of discord.)&lt;/p&gt;
&lt;p&gt;7/ The easiest way to perform a fault proof is to re-execute the whole block on
L1. This is what Optimism&amp;#39;s previous fault system attempted to do.&lt;/p&gt;
&lt;p&gt;Unfortunately, this system had many issues.&lt;/p&gt;
&lt;p&gt;8/ To keep costs manageable, every block carried a single transaction. This
would have had very bad consequences for the scalability of the rollup in the
long term. Not to mention, it&amp;#39;s very different from how L1 does things.&lt;/p&gt;
&lt;p&gt;9/ Second, &lt;a href=&quot;https://en.wikipedia.org/wiki/Interpreter_(computing)&quot;&gt;interpreting&lt;/a&gt; EVM bytecode onchain is just too expensive.&lt;/p&gt;
&lt;p&gt;This led to the original OVM: a system to deploy L2 bytecode as L1 bytecode.&lt;/p&gt;
&lt;p&gt;10/ The original OVM design works well for simple things, but not when &amp;quot;context&amp;quot;
is needed. For instance, you can&amp;#39;t translate the L2 NUMBER opcode (returning
block height) to the L1 NUMBER opcode! These opcodes needed to be translated
into calls to special contracts.&lt;/p&gt;
&lt;p&gt;11/ Similar issues played out for things like L2 contract calls.&lt;/p&gt;
&lt;p&gt;Replacing opcodes &amp;amp; calls by larger EVM routines &amp;amp; contract calls also meant
that the max size of contracts on L2 was smaller the max L1 contract size!&lt;/p&gt;
&lt;p&gt;12/ (And indirectly this also caused the choice of requiring a patched Solidity
compiler. Though it must be said other designs were possible there.)&lt;/p&gt;
&lt;p&gt;13/ The original OVM design was a good first attempt, but it was also clear it
wasn&amp;#39;t a good long term solution.&lt;/p&gt;
&lt;p&gt;14/ After the team (h/t &lt;a href=&quot;https://twitter.com/karl_dot_tech&quot;&gt;@karl_dot_tech&lt;/a&gt; &lt;a href=&quot;https://twitter.com/ben_chain&quot;&gt;@ben_chain&lt;/a&gt;) &amp;amp;
&lt;a href=&quot;https://twitter.com/realgeorgehotz&quot;&gt;@realGeorgeHotz&lt;/a&gt; came up with the idea for Cannon, it was decided to
drop the old fault proof system to start from a sane foundation. This was the
OVM 2.0 re-genesis.&lt;/p&gt;
&lt;p&gt;15/ (I wasn&amp;#39;t at Optimism at that time and wasn&amp;#39;t consulted, but these names are
pretty terrible. The OVM 1.0 (just like Arbitrum&amp;#39;s AVM) is only a VM in the most
abstract sense ‚Äî it&amp;#39;s a modified instruction set translated to run on the EVM.
The OVM 2.0 is not a VM in any sense.)&lt;/p&gt;
&lt;p&gt;16/ So how does Cannon prove a [txs ‚Üí block hash] mismatch if it does not
execute the whole block on chain?&lt;/p&gt;
&lt;p&gt;The solution is in two parts:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The challenge game&lt;/li&gt;
&lt;li&gt;The single step execution&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;17/ The challenge game is a binary search over the execution trace of the &amp;quot;fault
proof program&amp;quot;.&lt;/p&gt;
&lt;p&gt;In our case that program is one that, in first approximation, takes the L2 chain
state and some transactions as inputs and emits an L2 block hash.&lt;/p&gt;
&lt;p&gt;18/ George called this program &amp;quot;minigeth&amp;quot;.&lt;/p&gt;
&lt;p&gt;In reality its input is a set of L1 blockhashes, and the input will be a set of
L2 blockhashes. I&amp;#39;ll skip the details here as they get into the weeds of
Optimism Bedrock and not super relevant.&lt;/p&gt;
&lt;p&gt;19/ The important thing is that the input L1 blockhashes are a &lt;em&gt;commitment&lt;/em&gt; to
all the inputs we actually care about: the L2 state and the transactions. We can
prove these things against the blockhash. For instance, we can prove that a
batch was posted to one of these L1 blocks.&lt;/p&gt;
&lt;p&gt;20/ To retrieve the transactions &amp;amp; L2 state, minigeth uses a component called
&amp;quot;the preimage oracle&amp;quot;.&lt;/p&gt;
&lt;p&gt;This is a generic component that lets you go from a hash to a preimage. This is normally
&lt;a href=&quot;https://en.wikipedia.org/wiki/Preimage_attack&quot;&gt;impossible&lt;/a&gt; to compute for cryptographic hashes.&lt;/p&gt;
&lt;p&gt;21/ So the trick will be to get these [hash ‚Üí preimage] mappings from somewhere.
I&amp;#39;ll explain later how the preimage oracle is implemented on &amp;amp; off-chain. But
take it for granted for now.&lt;/p&gt;
&lt;p&gt;22/ So we have minigeth with our preimage oracle (which btw entirely replaces
geth&amp;#39;s usual database).&lt;/p&gt;
&lt;p&gt;We compile this to some instruction set, and execute it for our L1 blocks. This
yields an execution trace, which is the list of every instruction executed
during the execution.&lt;/p&gt;
&lt;p&gt;23/ During the challenge game, both the challenger and the sequencer do this,
and then perform a binary search to find the first instruction whose result they
disagree on.&lt;/p&gt;
&lt;p&gt;24/ It&amp;#39;s a binary search because they start by looking a the result of the
instruction 1/2 of the way through. If they disagree, they&amp;#39;ll look at the
instruction 1/4 of the way through, otherwise the instruction 3/4 of the way
through, etc...&lt;/p&gt;
&lt;p&gt;25/ They&amp;#39;ll keep narrowing the range until they zero in on a single instruction
they disagree on.&lt;/p&gt;
&lt;p&gt;(Note that the challenger and the sequencer don&amp;#39;t actually need to agree on the
size of the execution trace.)&lt;/p&gt;
&lt;p&gt;26/ What&amp;#39;s the &amp;quot;result of an instruction&amp;quot;? What do they agree/disagree on? It&amp;#39;s
simply a &lt;a href=&quot;https://en.wikipedia.org/wiki/Merkle_tree&quot;&gt;Merkle root&lt;/a&gt; of a snapshot of the minigeth&amp;#39;s memory!&lt;/p&gt;
&lt;p&gt;27/ George decided to compile minigeth to &lt;a href=&quot;https://en.wikipedia.org/wiki/MIPS_architecture&quot;&gt;MIPS&lt;/a&gt;. So every step in the
execution trace is a MIPS instruction.&lt;/p&gt;
&lt;p&gt;Why MIPS? It was one of the simplest instruction for which to implement an
interpreter on-chain, and Go can natively compile to MIPS!&lt;/p&gt;
&lt;p&gt;28/ To do all of the above, we need to be able to run minigeth off-chain, to (1)
get the execution trace and (2) generate MIPS memory snapshots.&lt;/p&gt;
&lt;p&gt;This is done by running the MIPS minigeth binary on the QEMU CPU emulator, and
hooking into the emulator.&lt;/p&gt;
&lt;p&gt;29/ Off-chain (in MIPS-on-QEMU), the preimage oracle is implemented via calls to
a JSON-RPC endpoint (i.e. querying an Ethereum node). In minigeth, each oracle
use is tagged with its type, so we know which JSON-RPC call to emit.&lt;/p&gt;
&lt;p&gt;30/ (The most common JSON-RPC call is &amp;quot;eth_getProof&amp;quot;, used very creatively to
retrieve storage slots and trie nodes.)&lt;/p&gt;
&lt;p&gt;31/ Alright, so the challenger and sequencer have agreed to disagree on a single
instruction.&lt;/p&gt;
&lt;p&gt;Next comes the single step execution.&lt;/p&gt;
&lt;p&gt;The goal is to execute that single instruction, on the L1 chain.&lt;/p&gt;
&lt;p&gt;32/ For this, we need:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;An on-chain MIPS interpreter to interpret any instruction&lt;/li&gt;
&lt;li&gt;Any location in MIPS memory that the instruction might read&lt;/li&gt;
&lt;li&gt;Any preimage that the instruction might request&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;33/ (1) was simply written by George.&lt;/p&gt;
&lt;p&gt;For (2), we already have a Merkle root of a memory snapshot taken right before
the instruction (from the challenge game). We can use it to prove any memory
location we might need to supply.&lt;/p&gt;
&lt;p&gt;34/ For (3), we simply presupply the [hash ‚Üí preimage] mapping by supplying
the preimage, and then the hash is derived on-chain.&lt;/p&gt;
&lt;p&gt;Note that minigeth off-chain is also instructed to save all the [hash ‚Üí
preimage] mappings it uses, so we have those handy.&lt;/p&gt;
&lt;p&gt;35/ Obviously, &amp;quot;preimage requests&amp;quot; are not a native MIPS instruction. Instead,
it&amp;#39;s encoded as a read to a pre-defined memory location, which &amp;quot;magically&amp;quot; has
the preimage of the hash that was previously written at another pre-defined
memory location.&lt;/p&gt;
&lt;p&gt;36/ This behaviour is implemented in the MIPS interpreter on-chain, and in the
QEMU hooks off-chain.&lt;/p&gt;
&lt;p&gt;37/ Alright, so finally we can use our pre-supplied memory and preimages to run
the single MIPS instruction on the on-chain MIPS interpreter. This yields a new
memory snapshot Merkle root, which can be compared to the root asserted by the
challenger.&lt;/p&gt;
&lt;p&gt;38/ If its Merkle root is the same, the challenge is valid, and the challenger
wins.&lt;/p&gt;
&lt;p&gt;We haven&amp;#39;t talked about this here, but in this case the challenger would receive
the sequencer&amp;#39;s &amp;quot;bond&amp;quot; as a reward.&lt;/p&gt;
&lt;p&gt;39/ And that&amp;#39;s most of what there is to it!&lt;/p&gt;
&lt;p&gt;‚ÄºÔ∏è A very important note before I give you some further reading.&lt;/p&gt;
&lt;p&gt;The current implementation of Cannon DOES NOT allow you to challenge L2 blocks.
Instead, it&amp;#39;s a proof-of-concept that allows you to challenge L1 blocks.&lt;/p&gt;
&lt;p&gt;40/ So minigeth is currently a program that takes a blockhash as input and
verifies the validity of that block by re-executing it on top of the previous
state.&lt;/p&gt;
&lt;p&gt;Obviously, no L1 block should ever be invalid, meaning no challenge should ever
succeed.&lt;/p&gt;
&lt;p&gt;41/ At least that&amp;#39;s the theory we&amp;#39;re putting on the line in our &lt;a href=&quot;https://immunefi.com/bounty/optimismcannon/&quot;&gt;bug bounty
program&lt;/a&gt;. Break this assumption and make 50k$ !&lt;/p&gt;
&lt;p&gt;42/ That was a looong thead, but I still had to simplify quite a bit and ommit
some details.&lt;/p&gt;
&lt;p&gt;So, were can you learn more about Cannon? I&amp;#39;m glad you ask!&lt;/p&gt;
&lt;p&gt;43/&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There&amp;#39;s the &lt;a href=&quot;https://github.com/ethereum-optimism/cannon&quot;&gt;github repository&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ethereum-optimism/optimistic-specs/wiki/Cannon-High-Level-Overview&quot;&gt;A high-level overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;A more detailed overview]&lt;a href=&quot;https://github.com/ethereum-optimism/optimistic-specs/wiki/Cannon-Overview&quot;&gt;detailed&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;44/ Now, go forth and spread the chant&lt;/p&gt;
&lt;p&gt;cannon cannon cannon&lt;/p&gt;
&lt;p&gt;Cannon! Cannon! Cannon!&lt;/p&gt;
&lt;p&gt;CANNON CANNON CANNON&lt;/p&gt;
      </description>
      <pubDate>2022-03-10T23:00:00.000Z</pubDate>
      <link>http://norswap.com/cannon-intro</link>
      <guid isPermaLink="true">http://norswap.com/cannon-intro</guid>
    </item>
    <item>
      <title>Olympus DAO: An Economic Analysis</title>
      <description>
&lt;p&gt;In my previous post ‚Äî &lt;a href=&quot;https://norswap.com/olympus&quot;&gt;Olympus DAO from Primary Sources&lt;/a&gt; ‚Äî we looked at
exactly how &lt;a href=&quot;https://www.olympusdao.finance/&quot;&gt;OlympusDAO&lt;/a&gt; worked by digging into the smart contracts implementing
it.&lt;/p&gt;
&lt;p&gt;If you&amp;#39;re jumping aboard this wagon, OlympusDAO is a decentralized app that
turned quite a few heads due to the high promised APY, sharp price increase, and
even sharper market cap increase.&lt;/p&gt;
&lt;p&gt;Last time we looked at what the protocol did mechanistically (the findings will
be recapped shortly). This time, we&amp;#39;re looking at the consequence of the
mechanisms for price, market cap, valuation, etc.&lt;/p&gt;
&lt;p&gt;(It goes without saying that all of this is a fun educational analysis, and none
of it is financial advice.)&lt;/p&gt;
&lt;h2 id=&quot;the-bottom-line&quot;&gt;The Bottom Line&lt;/h2&gt;
&lt;p&gt;I won&amp;#39;t tease you further, here are the basic conclusions (presented
out-of-order compared to the main text):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;OHM (Olympus&amp;#39; token) has extremely high programmed inflation, but the staking
product protects stakers against dilution.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;At first look, it looks like staking also increases ownership over the total
OHM supply when less than 100% of the supply is staked. In practice, it seems
likely that most of the unstaked supply is made out of liquidity pool
reserves owned by the protocol, meaning any increase in ownership is
compensated by a dilution of the treasury (which underpins the value of
owning the protocol!).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;As a result staking is very much useless (economically neutral) as a
mechanic, besides as a way to drive narrative and hype (high APYs!!).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;As a first approximation, the treasury value offers a floor price on OHM&amp;#39;s
market cap ‚Äî however this notion is thwarted by the fact that the OHM
treasury contain OHM tokens (in the liquidity pools underlying the LP
tokens). So when the price of OHM goes down, so the does the market value of
the treasury.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In reality, there exists a price &lt;code&gt;&amp;gt; 1$&lt;/code&gt; such that the OHM market cap is equal
to the market value of the treasury. Let&amp;#39;s call the treasury value at that
price the &lt;em&gt;sustainable value&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The sustainable treasury value must exist becau&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The treasury value decreases slower than the market cap (notably because
it contains stablecoins), so if the price keeps dipping, at some point the
market cap &amp;quot;catches up&amp;quot; with the treasury value.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Part of the treasury is denominated in stablecoins, and these were
collected when the OHM price was much higher than 1$. Meaning the
equilibrium (sustainable) price is &lt;code&gt;&amp;gt; 1$&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;In any case, the &amp;quot;backing per OHM&amp;quot; advertised by Olympus and the &amp;quot;treasury
value&amp;quot; advertised by Wonderland are misleading since these value go down when
the price goes down.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If the high inflation (rebase) rate persists, OHM will eventually go down to
1$, at which point a backstop in the inflation logic prevents further
inflation until the price increases again.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bond sales are the real interesting mechanism. They are a programmed way to
raise funds for the treasury via further inflation. Wether this is inflation
is dilutive to OHM stakers depends on whether the bond sales discount is
lower or higher than the current price premium (see below).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;When discussing Olympus valuation, it will be much more useful to use gOHM
(indexed OHM ‚Äî i.e. wrapped staked OHMs that do not dilute due to rebases)
as a reference.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A useful model to value Olympus&amp;#39; market cap is to assume it should trade at
a premium to the sustainable treasury value. This premium is justified by
the fact that gOHM is essentially (a) a voucher for ownership of part of the
treasury + (b) a call option on the gOHM price. The call option part is the
premium.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The premium essentially depends on the &lt;em&gt;sustainable&lt;/em&gt; backing per gOHM + the
expected future premium.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The backing could increase for multiple reasons: yield farming with the
treasury, VC-like investments with the treasury, or new products that
increase the treasury, like Olympus Pro.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The backing also naturally increases through bond sales, as long as the bond
sales discount is lower than the current premium.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Because the current premium depends on the expected future premium, the
process is reflexive (it&amp;#39;s a &amp;quot;Keynesian beauty context&amp;quot; or &amp;quot;a fixed-point
calculation&amp;quot;). Each participant must try to guess how every other
participant will value OHM.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ignoring this issue for now, what price should you be willing to purchase
OHM at. i.e. what premium are you willing to accept?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I propose the formula: &lt;code&gt;maximum_purchase_price = expected_sustainable_treasury_backing * (1 + expected_premium) - current_price * (risk_free_rate + risk_premium)&lt;/code&gt; (We already discussed all
terms except the risk-free rate and the risk premium.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The risk-free rate is the return rate you could get without taking risk. No
such thing as &amp;quot;risk-free&amp;quot; in crypto, but you could set that to the lending
rate on Aave or Compound for instance. (Or just use the US bonds rate!)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The risk premium is the return rate you demand to be compensated for the
risk that you are taking.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;See the article for an example of thow this computation can be borne out in
practice.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I also briefly discuss the relationship between the premium and the treasury
size. Mostly, as the treasury grows, it&amp;#39;s natural to expect that the premium
should decrease: the team doesn&amp;#39;t scale linearly with capital, and
investment opportunities become scarcer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;It&amp;#39;s important to note that the Olympus team is aware of some of these
issues. See this &lt;a href=&quot;https://hackmd.io/@HMyg0dxkQ96YOMpI30o8PA/mbga&quot;&gt;whitepaper&lt;/a&gt; by Zeus and Indigo, which proposes
&amp;quot;an evolution from the existing staking-centric model in favor of a
bond-centric model&amp;quot;. The goal are to truly lock away part of the supply
(which staking doesn&amp;#39;t do) and enable selling &amp;quot;internal&amp;quot; OHM-OHM bonds (just
like US treasury bonds but with OHM instead of USD) at high volume without
adversely affecting the OHM price.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The team also came up with &lt;a href=&quot;https://olympusdao.medium.com/olympus12-building-a-strong-ecosystem-around-a-web3-native-reserve-currency-416f58175e74&quot;&gt;the Olympus12 roadmap&lt;/a&gt;, which
outlines a strong (imho) and extremely interesting action plan for
bolstering the economics of OlympusDAO going forward. I do think the success
of the plan hinges on whether they will manage to convince projects and
people to effectively treat OHM (more like gOHM) as a token to put on the
balance sheet / in their long-term portfolio, and not just speculation &amp;amp;
arbitrage. With the right mix of incentives and interesting use cases, they
might be able to.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#the-bottom-line&quot;&gt;The Bottom Line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#how-olympus-works-recap&quot;&gt;How Olympus Works: Recap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#olympusdao-valuation&quot;&gt;OlympusDAO Valuation&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#olympus-assets&quot;&gt;Olympus&amp;#39; Assets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#treasury-as-market-cap-floor&quot;&gt;Treasury as Market Cap Floor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#sustainable-value&quot;&gt;Sustainable Value&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#the-floor-in-practice&quot;&gt;The Floor in Practice&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#the-premium-risk-free-rate-and-riks-premium&quot;&gt;The Premium, Risk-Free Rate and Risk Premium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#pricing-gohm&quot;&gt;Pricing gOHM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#evolution-of-the-backing-per-gohm&quot;&gt;Evolution of the backing per gOHM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#modelling-the-premium&quot;&gt;Modelling the Premium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#olympus-in-the-long-run&quot;&gt;Olympus in the Long Run&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#on-the-uselessness-of-staking&quot;&gt;On the Uselessness of Staking&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#on-the-usefulness-of-bonding&quot;&gt;On the Usefulness of Bonding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus-econ/#coda&quot;&gt;Coda&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;how-olympus-works-recap&quot;&gt;How Olympus Works: Recap&lt;/h2&gt;
&lt;p&gt;If you missed &lt;a href=&quot;https://norswap.com/olympus&quot;&gt;the previous article&lt;/a&gt;, here is a copy of my (fairly
detailed) summary of OHM&amp;#39;s mechanisms. This should be all you need to follow
along!&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;The total supply of $OHM inflates at the &lt;em&gt;staking reward rate&lt;/em&gt; every ~8
hours. This inflation is redistributed among stakers. The inflation
distribution event that happens every 8 hours is called &lt;em&gt;a rebase&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The staking reward rate is set by the OlympusDAO policy team. For the longest
time, this reward rate was 0.35%. It is currently 0.2%, on its way down to a
target of 0.16%. At 0.35%, this implies an inflation of 4487%. This is also
the minimum staking APY in OHM (if 100% of the OHM is staked, otherwise it
will be higher). At 0.16%, this implies a 475% inflation (yup ‚Äî exponentials
are weird).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;OlympusDAO has a treasury composed of stablecoins and OHM-stablecoin
[liquidity pool (LP) tokens][lp-tokens]. The treasury is constituted by
selling bonds (see below).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A central concept is the &amp;quot;risk-free value&amp;quot; (RFV) of the treasury. This is simply
1$ for stablecoin. For LP tokens, it is the price the token would take if the
OHM price fell to 1$. Controversially, this means that part of the RFV of the
treasury is made of OHM tokens (in the liquidity pools).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Rebases can only go through if there is 1$ of risk-free value in the treasury
for each OHM in existence including the newly-minted ones. This sets a
soft-floor if 1$ on the OHM price, assuming that the OHM market cap should
always be at least as large as the risk-free value of the OHM treasury.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The protocol maintains a metric called &amp;quot;the index&amp;quot; which is how much OHM you
would own if you staked a single OHM on the day the protocol launched
(currenty 74). Recently, Olympus launched the gOHM (&amp;quot;governance OHM&amp;quot;) which
&amp;quot;wraps&amp;quot; the indexed amount of staked OHM. The main avowed purpose was to
enable the trading of staked OHM on other chains.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Staking comes with an optional warm-up period (currently disabled) which
forces people to wait a configurable amount of time before their OHM tokens
are staked.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;At any time, people can purchase OHM bonds using various stablecoins and
OHM-stablecoin &lt;a href=&quot;https://www.google.com/search?hl=en&amp;amp;q=lp%20tokens&quot;&gt;LP tokens&lt;/a&gt;. The policy team can add, remove or tweak these
bond markets. The bonds are usually sold as a small discount to
the OHM market price. The bonds grant newly minted OHM tokens to the buyer.
These tokens vest over a configurable period, which has always been 5 days.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The DAO takes a (configurable) fee over every bond sale, although this is
currently set to 0, and it&amp;#39;s rather hard to search historical state to see if
it was ever set differently.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bond pricing uses a notion of risk-free value (RFV). The risk-free value of
stablecoins is equivalent to their market value. For LP tokens however,
Olympus assumes a worst-case scenario where OHM is worth 1$, and prices the
LP tokens accordingly.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Bonds are priced differently depending on the token used to purchase the
bonds. The bond price is determined by the formula &lt;code&gt;bondPrice = min(BCV * debtRatio + 1, minimumPrice)&lt;/code&gt;, where:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;One bond grants one OHM after the vesting period.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For simplicity, I ignore the decimals on &lt;code&gt;minimumPrice&lt;/code&gt; and &lt;code&gt;bondPrice&lt;/code&gt;
(assume those are infinite precision numbers), and assume that &lt;code&gt;debtRatio&lt;/code&gt;
is a value between 0 and 1.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;BCV&lt;/code&gt; is the bond control variable, set by the policy team for each token&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;debtRatio&lt;/code&gt; is a ratio between (a) the risk-free value of all tokens used for
bond purchases (tallied at the moment of purchase) scaled by the remaining
vesting time; and (b) the total OHM supply.&lt;/p&gt;
&lt;p&gt;Note that the numerator and the denominator have different units (risk-free
USD and OHM), and consequently, the debt ratio rises faster when the OHM
price is high.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;minimumPrice&lt;/code&gt; ‚Äî as the name indicates. However, once a bond purchases occurs
above the minimum price, it is then set to 0, allowing subsequent purchases
to occur below the bond price.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; There is maximum amount of debt (denominated in risk-free value) allowed
 per token, preventing the emission of too many bonds, and offering some
 protection against attacks (e.g. if a stablecoin was to lose his peg).&lt;/p&gt;
&lt;p&gt; Because the formula is not based on the market price of OHM, the bond price
 can occasionally exceed the market price!&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;example&quot;&gt;Example&lt;/h2&gt;
&lt;p&gt;To make things more concrete, I&amp;#39;m also copying verbatim the example from last
time in this section. This will help you have a better sense of the mechanisms
that we are discussing.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s assume that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OHM is worth 70$ (as it was when I wrote this example)&lt;/li&gt;
&lt;li&gt;the OHM-DAI liquidity pool contains 100 OHM (and therefore
7000 DAI, which we&amp;#39;ll write 7000$ for convenience)&lt;/li&gt;
&lt;li&gt;the ownership of the pool is split accross 100 LP tokens, each of which is
worth &lt;code&gt;0.01 * 2 * 7000 = 140&lt;/code&gt; $&lt;/li&gt;
&lt;li&gt;the current debt ratio for the OHM-DAI bond depository contract is 5%&lt;/li&gt;
&lt;li&gt;the bond control variable (BCV) for the OHM-DAI contract is 207 (as it is at
the time for writing)&lt;/li&gt;
&lt;li&gt;the (thrice-daily) rebase rate is 0.24% (as it was when I wrote this)&lt;/li&gt;
&lt;li&gt;the DAO fee is 1%. This is currently 0% in both v1 and v2 bonds, and it&amp;#39;s
particularly difficult to find historical values (you&amp;#39;d have to run your own
node and re-execute transactions, since value changes are not even logged).&lt;/li&gt;
&lt;li&gt;the RFV backing per OHM is about 26$ (as it was ...)&lt;/li&gt;
&lt;li&gt;the market-rate backing per OHM is about 60$ (as it was ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Under these condtions, the risk-free value (RFV) of such a DAI-OHM LP token is
&lt;code&gt;0.01 * 2 * sqrt(100 * 7000) ~= 16.73&lt;/code&gt; $.&lt;/p&gt;
&lt;p&gt;If a user uses a single LP token to purchase bonds, he would get back bonds that
would grant &lt;code&gt;(16.73 * 100) / (100 + 5 * 207) == 2.32&lt;/code&gt; OHM. This represents a
&amp;quot;premium&amp;quot; of 0.73 OHM compared to the market price, which is equivalent of an
effective OHM price of &lt;code&gt;140 / 2.32 = 60.34&lt;/code&gt; $, or an effective discount rate of
14% compared to the market price.&lt;/p&gt;
&lt;p&gt;A more realistic discount assessment would also consider that during the vesting
period of 5 days, the OHM supply will inflate by around 3.7% (&lt;code&gt;1.0024^(3*5) ~= 1.037&lt;/code&gt;), so the effective discount is closer to 10%, assuming the buyer redeems
at the end of the vesting period (of course, Ethereum transaction prices makes
the amounts we&amp;#39;re discussing completely unreleastic, but whatever).&lt;/p&gt;
&lt;p&gt;We&amp;#39;ll note that &lt;a href=&quot;https://olympusdao.medium.com/introducing-olympus-v2-c4ade14e9fe&quot;&gt;v2 bonds&lt;/a&gt; solve this issue by staking the granted amount
immediately, and so there is no loss due to inflation.&lt;/p&gt;
&lt;p&gt;So in this example, 2.343 OHM are emitted (&lt;code&gt;1.01 * 2.32&lt;/code&gt; to account for the DAO
fee), backed by 140$ of market value and 16.73$ of risk-free value (7.14$ per
OHM).&lt;/p&gt;
&lt;p&gt;In this case, the RFV backing per minted OHM (7.14$) is significantly less than
the current RFV backing per OHM (which is 26$). This means that each OHM emitted
in bonding decreases the backing per OHM.&lt;/p&gt;
&lt;p&gt;This is an inherent property of LP bond sales. Stablecoin bond sales, on the
other hand, tend to increase the RFV backing per OHM.&lt;/p&gt;
&lt;h2 id=&quot;olympusdao-valuation&quot;&gt;OlympusDAO Valuation&lt;/h2&gt;
&lt;p&gt;The central question in our analysis is going to be &amp;quot;how should OlympusDAO be
valued?&amp;quot;. Meaning: what should the market cap on the OHM supply be?&lt;/p&gt;
&lt;p&gt;As we shall see, this is not an easy question, given that on one hand the
treasury value is in flux, and the highly dilutive nature of the token on the
other hand.&lt;/p&gt;
&lt;p&gt;There is of course no definitive answer to that question, but we can give many
clues as to what an answer can look like.&lt;/p&gt;
&lt;p&gt;A lot of the data I&amp;#39;m going to use in this analysis, come from the excelent
&lt;a href=&quot;https://dune.xyz/shadow&quot;&gt;Dune dashboards&lt;/a&gt; by &lt;a href=&quot;https://twitter.com/sh4dowlegend&quot;&gt;shadow&lt;/a&gt; (Olympus&amp;#39; policy lead), in particular the
&lt;a href=&quot;https://dune.xyz/shadow/Olympus-(OHM)&quot;&gt;Olympus dashboard&lt;/a&gt; and the Olympus Policy dashboard.&lt;/p&gt;
&lt;h3 id=&quot;olympus-assets&quot;&gt;Olympus&amp;#39; Assets&lt;/h3&gt;
&lt;p&gt;OlympusDAO has three &amp;quot;assets&amp;quot;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the treasury&lt;/li&gt;
&lt;li&gt;the DAO funds&lt;/li&gt;
&lt;li&gt;its &amp;quot;team members&amp;quot; (i.e. the people paid by the DAO to develop OlympusDAO, either by
means of code, marketing, business development, ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;First, let&amp;#39;s precise the difference between the treasury and the DAO funds.&lt;/p&gt;
&lt;p&gt;The treasury is by design a reserve that backs the value of OHM. There is no
peg, and so this reserve is allowed to be less than the market cap of OHM (as it
has been for most of its history), or even greater (though this should only be a
temporary aberration, as we&amp;#39;ll argue shortly).&lt;/p&gt;
&lt;p&gt;The DAO funds are accrued via the DAO fee perceived during a bond sale. They are
managed by the DAO&amp;#39;s &lt;a href=&quot;https://docs.olympusdao.finance/main/contracts/dao&quot;&gt;multisig signatories&lt;/a&gt;, which used to be the de facto leaders
of the project. With the introduction of the gOHM token, token governance now
has a purview on how the DAO spends those funds.&lt;/p&gt;
&lt;p&gt;Although I haven&amp;#39;t looked into it, DAO funds are traditionally used to pay the
team and perform other interventions (e.g. usage incentives, strategic token
acquisition, such as CRV or TOKE, etc...).&lt;/p&gt;
&lt;p&gt;However, if the DAO pulls in enough fees to properly fund development, it is
perfectly possible that it could redistribute part of the fee cashflows to users
in various ways (dividends, token buybacks, or a combination of both *).&lt;/p&gt;
&lt;p&gt;*) In Olympus&amp;#39; case, there is an extremely elegant way to do this: use DAO
funds to purchase bonds, then deposit the received OHM in the staking contract
where it will automatically be distributed amongst all stakers (cf. &lt;a href=&quot;https://norswap.com/olympus&quot;&gt;previous
article&lt;/a&gt; to see how this distribution works on a nuts-and-bolt level).&lt;/p&gt;
&lt;p&gt;The team members should only be considered an asset insofar that users are
confident that they are working to accrue value to token holder, whether by
growing the treasury, accruing DAO fees to be redistributed, or other mechanisms
like airdrops.&lt;/p&gt;
&lt;h3 id=&quot;treasury-as-market-cap-floor&quot;&gt;Treasury as Market Cap Floor&lt;/h3&gt;
&lt;p&gt;So, how do we value this?&lt;/p&gt;
&lt;p&gt;Well, Olympus must at least be worth as much as the treasury + the portion of
DAO funds that hasn&amp;#39;t been yet earmarked for a specific use. The DAO fee percent
is currently 0, and though I don&amp;#39;t have the data, I don&amp;#39;t believe it was ever
very high. We&amp;#39;ll thus make the simplifying assumption that its value is
negligible compared to the treasury.&lt;/p&gt;
&lt;p&gt;The project must be worth at least as much as the treasury because, in the worst
case, token holders can vote to dissolve the treasury and compensate OHM and
sOHM holders in proportion of their holdings.&lt;/p&gt;
&lt;p&gt;However, things are not &lt;em&gt;entirely&lt;/em&gt; as simple as this, because the treasury does
contain OHM tokens (underlying half the value of the LP token). &lt;strong&gt;So when the
price of OHM goes down, so the does the market value of the treasury.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The market value doesn&amp;#39;t work as a price floor, but neither does the risk-free
value (RFV, the value when OHM is priced at 1$). That price is actually too
pessimistic.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In reality, there exists a price &amp;gt; 1$ such that the OHM market cap is equal to
the market value of the treasury.&lt;/strong&gt; Let&amp;#39;s call the treasury value at that price
the &lt;em&gt;sustainable value&lt;/em&gt;.&lt;/p&gt;
&lt;h3 id=&quot;sustainable-value&quot;&gt;Sustainable Value&lt;/h3&gt;
&lt;p&gt;In this section, I will show why the sustainable value exists. We&amp;#39;ll illustrate
how a decreasing OHM price decreases the market value of the treasury, then show
that this decrease is less than the price decrease, meaning that at some point,
the market cap falls below the market value of the treasury. The market value of
the treasury at this point is what we call the sustainable value.&lt;/p&gt;
&lt;p&gt;(If you accept this premise and are not interested in getting more supporting
intuition as to why it is true, feel free to skip this section.)&lt;/p&gt;
&lt;p&gt;The Olympus treasury comprises a lot of LP tokens. The market value of those is
made by half by OHM tokens. This means that as the OHM price drops, so does the
market treasury value.&lt;/p&gt;
&lt;p&gt;Even simple &lt;code&gt;x*y=k&lt;/code&gt; AMMs are not intuitive, so I&amp;#39;ll avoid off on giving a full
exposition. However, to give some intutition, as the price falls and people sell
OHM into the liquidity pool, these three things happen:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The market value of the OHM reserve of the liquidity pool drops.&lt;/li&gt;
&lt;li&gt;The OHM reserves of the pool increase.&lt;/li&gt;
&lt;li&gt;The stablecoin reserves of the pool decrease, by the amount of OHM sold to the
pool at some &amp;quot;average&amp;quot; price between the old OHM price and the new OHM price.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So that&amp;#39;s not great: not only does the value of the whole OHM part decrease, but
the stable reserves also decreases, and decreases more than compensated by the
increase in OHM reserves valued at the new market price.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s do a simple example for illustration&amp;#39;s sake.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Assume a liquidity pool with 100 OHM valued at $69 each.&lt;/li&gt;
&lt;li&gt;The pool is thus worth (&lt;code&gt;2*100*69 == 13,800$&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Using the &lt;code&gt;x*y = k&lt;/code&gt; AMM formula, we get &lt;code&gt;k == 690,000&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now assume someone sells 10 OHM into the pool.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We have 110 OHM, so to preserve the value of &lt;code&gt;k&lt;/code&gt;, the new amount of
stablecoin becomes &lt;code&gt;690,000 / 110 == 6,272,72&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The new value of the pool is the double of this, i.e 12,544.44.&lt;/li&gt;
&lt;li&gt;The new token price is &lt;code&gt;6,272,72 / 110 == 57.022&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Consequently:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The token price dropped 17.36%&lt;/li&gt;
&lt;li&gt;The pool&amp;#39;s total value dropped by 9%.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note that the relationship between those things is not linear and depends on the
parameters (e.g. the impact of a 10 OHM sale would have been smaller on a bigger
pool, although the impact of a sale 10% the size of the pool would have been the
same).&lt;/p&gt;
&lt;p&gt;Using the &lt;a href=&quot;https://dune.xyz/shadow/Olympus-(OHM)&quot;&gt;Olympus Dune dashboard&lt;/a&gt;, we can see that (at the time
of writing) the treasury market value is $484,110,067, while the risk-free
market value is $237,941,247.&lt;/p&gt;
&lt;p&gt;The dashboard does warn that the values might not be accurate because of
the v2 migration. There is some discrepancy from the Olympus app. For
instance, the market cap on dashboard is $710M while it is $680M on the app. The
app seems to put the market value of the treasury (as determined form the
backing per OHM seems a few 10s of % higher).&lt;/p&gt;
&lt;p&gt;So let&amp;#39;s be conservative and say that the RFV of the treasury is 2-4x lower than
its market value.&lt;/p&gt;
&lt;p&gt;So as the OHM price decreases so does the market value of the treasury, albeit
potentially slower than the price.&lt;/p&gt;
&lt;p&gt;Also, the treasury also contains stablecoins in addition to LP tokens, which
means it will fall even slower percentage-wise than the OHM price.&lt;/p&gt;
&lt;p&gt;Because this market value of the treasury decreases slower than the price, it
means there must necessarily exist a price (the &lt;em&gt;sustainable price&lt;/em&gt;) such that
the OHM market cap is equal to the market value of the treasury.&lt;/p&gt;
&lt;p&gt;Because part of the treasury is denominated in stablecoins, and these were
collected the OHM price was much higher than 1$, it does mean that the
sustainable price is higher than 1$, and hence the sustainable value is higher
than the RFV.&lt;/p&gt;
&lt;p&gt;As simple way to see that is that this is like solving the equation &lt;code&gt;100 + 10x = 100x&lt;/code&gt; (e.g. imagine the treasury holds 100$ and 10 OHM and the market cap is 100
OHM, and &lt;code&gt;x&lt;/code&gt; is the OHM price). In this case &lt;code&gt;x = 100 / 90 &amp;gt; 1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What this analysis shows is that the &amp;quot;backing per OHM&amp;quot; advertised by Olympus (as
well as the &amp;quot;treasury value&amp;quot; advertised by Wonderland) are misleading since
these value go down when the price goes down. However, the RFV value of the
treasury is too pessimistic as a floor price, since there exist an intermediate
&amp;quot;floor price&amp;quot; where the market cap is equal to the market value of the treasury.&lt;/p&gt;
&lt;h3 id=&quot;the-floor-in-practice&quot;&gt;The Floor in Practice&lt;/h3&gt;
&lt;p&gt;Interestingly, the theory that the market cap should never dip below the market
price (the point at which it dips below being the sustainable price) has been
put to the test recently, as OlympusDAO and its forks experience an accelerating
crash over the past few weeks.&lt;/p&gt;
&lt;p&gt;OlympusDAO is currently hovering at 25% over the market value of the treasury.
&lt;a href=&quot;https://www.wonderland.money/&quot;&gt;Wonderland&lt;/a&gt;, Olympus&amp;#39; biggest and most famous fork, actually &lt;a href=&quot;https://www.coindesk.com/markets/2022/01/18/defis-wonderland-is-buying-time/&quot;&gt;dipped under the
market value of its treasury&lt;/a&gt; and &lt;a href=&quot;https://archive.is/1Av9l&quot;&gt;a vote was held to dissolve the
treasury&lt;/a&gt;, which failed narrowly, but with a majority of holders
against dissolution.&lt;/p&gt;
&lt;p&gt;For context, in addition to the price crash, Wonderland was shaken by the
revelation that &amp;quot;Sifu&amp;quot; ‚Äî its treasury manager ‚Äî was a former convicted scammer.&lt;/p&gt;
&lt;p&gt;(As an aside, I consider this vote rational and see it as mostly a vote of
confidence. Since Sifu was removed, as long as you trust the rest of the team
with the treasury, there is no reason to not wait to recapture a premium over
the treasury value. Such rebounds are common in crypto if the project does not
immediately implode. If things don&amp;#39;t improve, the treasury can still be unwound
later ‚Äî there is a no-cost upside in waiting a little bit.)&lt;/p&gt;
&lt;h3 id=&quot;the-premium-risk-free-rate-and-risk-premium&quot;&gt;The Premium, Risk-Free Rate and Risk Premium&lt;/h3&gt;
&lt;p&gt;If the &lt;em&gt;sustainable value&lt;/em&gt; of the treasury represents a floor for the market
cap, what causes it to rise above that level? This is what we&amp;#39;ll call &lt;em&gt;the
premium&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Basically, in the case of OlympusDAO, a big part of the premium comes from the
team and the possibility of future earnings. If team members roll out new
features or new products that will accrue value to token holders, this
possibility should be captured in the token price.&lt;/p&gt;
&lt;p&gt;The easiest way to think about the premium is that when you buy the token, you
really buy two things: (a) a voucher for a slice of the treasury at its
&lt;strong&gt;current&lt;/strong&gt; (not sustainable) value; and (b) a call option representing the
potential for the sustainable value of the treasury to increase. This call
option part is the premium.&lt;/p&gt;
&lt;p&gt;In particular, the call option part represent the expectation that the treasury
backing per inflation-indexed token (gOHM) will increase. It&amp;#39;s important to only
consider gOHM, not OHM, because there is no expected backing increase per OHM ‚Äî
since it inflates so much due to the rebases.&lt;/p&gt;
&lt;p&gt;There are a few ways the backing per gOHM could increase:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;new initiatives increase the value of the treasury without dilution&lt;/li&gt;
&lt;li&gt;yield farming with the treasury&lt;/li&gt;
&lt;li&gt;venture capital investments with the treasury&lt;/li&gt;
&lt;li&gt;bond sales, as long as the current premium is higher than the bond discount&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Olympus actually rolled out an initiative that increased the treasury value at
no cost or dilution to token holders, in the form of &lt;a href=&quot;https://www.olympusdao.finance/pro&quot;&gt;OlympusPro&lt;/a&gt;, a side
product that allowed other protocols to conduct their own bond sales based on
the Olympus model. The Olympus treasury captures a 3.3% fees on every bond sale
conducted on Olympus Pro.&lt;/p&gt;
&lt;p&gt;Another potential source of premium is the utilization of treasury funds to
generate yield.&lt;/p&gt;
&lt;p&gt;Here we need to be careful, because it wouldn&amp;#39;t make sense to say that the
treasury funds can be used for yield farming (e.g. lending on Aave for a 5% APY)
and thus the premium should increase accordingly.&lt;/p&gt;
&lt;p&gt;The idea here is that the yield farming opportunity is also open to you. Say you
have stablecoins sitting around, instead of buying gOHM (or equivalently, buying
and staking OHM), you could yield farm yourself. &lt;strong&gt;The premium should only
capture returns in excess of that yield.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In traditional finance, this notion is known as the &amp;quot;risk-free rate&amp;quot; and is
typically given by the yield on AAA-rated treasury bonds, in particular the US
treasury bonds.&lt;/p&gt;
&lt;p&gt;(If you&amp;#39;re interested in treasury bonds and how they behave, see my previous
article on the topic: &lt;a href=&quot;https://norswap.com/bonds/&quot;&gt;one&lt;/a&gt;, &lt;a href=&quot;https://norswap.com/bonds-2/&quot;&gt;two&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;This is not to say Olympus shouldn&amp;#39;t yield farm. Quite the opposite: it&amp;#39;s much
easier to produce excess return on the risk-free rate if you just happen to have
funds that you can yield farm with to produce this rate in the first place.&lt;/p&gt;
&lt;p&gt;In fact, &lt;a href=&quot;https://twitter.com/quasicypher1/status/1486737670088896517&quot;&gt;Olympus &lt;em&gt;is&lt;/em&gt; yield farming&lt;/a&gt; (see also &lt;a href=&quot;https://twitter.com/ohmzeus/status/1486744382825017349&quot;&gt;this
remark&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Now, there is nothing such as a &lt;em&gt;risk-free&lt;/em&gt; return in crypto. You&amp;#39;re always at
least taking smart contract risk (bugs, hacks).&lt;/p&gt;
&lt;p&gt;However it&amp;#39;s fair to consider that buying OHM high abvoe the sustainable rate is
riskier than yield farming on Aave. If we consider that both projects have been
extremely well audited, then OHM additionally exposes you to price (premium!)
volatility. You need to be compensate for that risk, and that is the &lt;em&gt;risk
premium&lt;/em&gt; (not the same thing as the OHM price premium over the sustainable
price!).&lt;/p&gt;
&lt;p&gt;Finally, another source of premium would be to conduct venture capital (VC)
investments using the treasury. Here the premium stems from a few factor:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The treasury is large, which makes OlympusDAO a privileged partner compared to
poorer individual investors.&lt;/li&gt;
&lt;li&gt;The treasury is also large enough that it can diversify by betting on numerous
projects, which is central to the sustainability of the venture capital model
(where you only have a few winners that make up for all your losers).&lt;/li&gt;
&lt;li&gt;The OlympusDAO team is talented and probably better able to determine a
project&amp;#39;s odds of success than the average OHM holder.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Though it has been discussed online, there is no indication at the moment that
the Olympus team intends to engage in venture capital investments.&lt;/p&gt;
&lt;p&gt;Last, but not least, the sustainable backing per OHM increases naturally via
bond sales, as long as the discount price is lower then the current premium,
i.e. as long a bonds are sold for more than the sustainable backing per OHM.&lt;/p&gt;
&lt;p&gt;This mechanism is the main driver of treasury growth, and we will revisit it
&lt;a href=&quot;https://norswap.com/olympus-econ/#evolution-of-the-backing-per-gohm&quot;&gt;below&lt;/a&gt;. Unlike the previous mechanisms, it
is &amp;quot;dilutive&amp;quot; in the sense that it mints new tokens ‚Äî although if the backing
per gOHM increases, this is not really a problem.&lt;/p&gt;
&lt;h3 id=&quot;pricing-gohm&quot;&gt;Pricing gOHM&lt;/h3&gt;
&lt;p&gt;Let&amp;#39;s put all the pieces from the last section (premium, risk-free rate and risk
premium) together and attempt to see if we can come with a &amp;quot;fair&amp;quot; price for
gOHM, given our assumptions as investors.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s assume, for simplicity sake, that the sustainable price of gOHM is 100$ at
present, and you expect the sustainable price to increase by 50$ over your
investment horizon (say one year). How much should be willing to buy gOHM for?&lt;/p&gt;
&lt;p&gt;A naive (and wrong) answer to this would be to say that any price under 150$ is
fine, as it will net you a you profit. This is wrong for a two reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;At your point of reference in the future, gOHM should still trade at a
premium, so if the sustainable value is 150$, the price of gOHM will be higher
than that.&lt;/li&gt;
&lt;li&gt;If on the other hand, if we assume that the premium will be 0, it&amp;#39;s still
wrong to purchase at say 149$, because you&amp;#39;re only making a &lt;code&gt;1/149 = 0.6%&lt;/code&gt;
return. This is much less than the risk-free rate (e.g. 5%).&lt;/li&gt;
&lt;li&gt;But buying so that you make exactly the risk-free rate is also wrong. You&amp;#39;re
taking significantly more risk by buying OHM, therefore you should expect
higher returns to compensate you for that risk (the &lt;em&gt;risk premium&lt;/em&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Therefore your buy price should be any price under:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;expected_sustainable_treasury_backing * (1 + expected_premium) - current_price * (risk_free_rate + risk_premium)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Where &lt;code&gt;expected_premium&lt;/code&gt;, &lt;code&gt;risk_free_rate&lt;/code&gt; and
&lt;code&gt;risk_premium&lt;/code&gt; are percentages (quantities between 0 and 1).&lt;/p&gt;
&lt;p&gt;Therefore, to value gOHM, you need to make the following predictions/decisions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;How much will the (sustainable) treasury backing per gOHM increase?&lt;/li&gt;
&lt;li&gt;How will the premium change?&lt;/li&gt;
&lt;li&gt;What are my &amp;quot;risk-free&amp;quot; alternatives? i.e., what do I use as risk-free rate?&lt;/li&gt;
&lt;li&gt;How risky is the investment? i.e., what risk premium do I demand in order to
feel like the potential upside is worth the risk?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let&amp;#39;s plug in some numbers. Say the current premium is 25% (so the price is
125$) and I expect this to remain stable. Say I consider 5% to be my risk-free
rate, and I&amp;#39;d like to be compensated at 10% for the risk I&amp;#39;m taking. Then you
get:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;150 * (1 + 0.25) - 125 * (0.05 + 0.1) = 168.75&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Since the current price (125$) is less than 168.75$, you should buy gOHM, and if
all your predictions are uncannily accurate, the token will be worth &lt;code&gt;150 * 1.25 = 187.5$&lt;/code&gt; in a year. You will sell for a 62.5$ profit, which is a 50% return
rate ‚Äî as expected since the backing increased 50% and the premium didn&amp;#39;t
change. This is higher than your desired 15% return rate (5% risk-free rate +
10% risk premium).&lt;/p&gt;
&lt;h3 id=&quot;evolution-of-the-backing-per-gohm&quot;&gt;Evolution of the Backing per gOHM&lt;/h3&gt;
&lt;p&gt;The formula above asks you to predict the future sustainable backing per gOHM.
Let&amp;#39;s now look at how you could do that. The value actually depends on a couple
of factors:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The percentage of the OHM supply staked (this has been fairly stable at &lt;a href=&quot;https://dune.xyz/shadow/Olympus-(OHM)&quot;&gt;90%
for most of of Olympus&amp;#39; history&lt;/a&gt;, though it has dipped to
the low 80s over the last month. The lower the percentage of the supply
staked, the faster stakers (hence gOHM holder) accrue ownership over the
total supply at the expense of non-stakers. At 90%, the return rate is 6.6%.&lt;/li&gt;
&lt;li&gt;The dilution incurred by LP bond sales.&lt;/li&gt;
&lt;li&gt;The amount of bond token sales, and their discount rate.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;One big question to solve here is &amp;quot;who are the non-stakers?&amp;quot;. I actually expect
that a significant part of the non-staked supply is made of the OHM token
backing the LP tokens owned by the treasury!&lt;/p&gt;
&lt;p&gt;This explanation fits perfectly the fact that the staking percentage decreased
over the last month: as OHM price decreased, the amount of OHM underlying the LP
token naturally increased (as OHM was traded in in exchange for stablecoins)!&lt;/p&gt;
&lt;p&gt;This means that even the increased ownership for stakers comes at the expense of
the treasury (whose OHM tokens keep diluting). I think it&amp;#39;s fair to model the
return on staking as essentially nil, but preventing rebase-induced dilution.&lt;/p&gt;
&lt;p&gt;So we&amp;#39;re left with bonding.&lt;/p&gt;
&lt;p&gt;The sustainable backing by gOHM can either increase or decrease from bond sales,
depending on whether the increase in the sustainable treasury value compensates
the dilution incurred by the bond sale.&lt;/p&gt;
&lt;p&gt;It depends on the current premium and the bond discount: if the discount is
smaller than the premium, then the backing per newly minted OHM is higher than
the current sustainable backing per OHM (therefore very slightly increasing to
total backing per OHM). If on the other hand the discount is higher than the
discount, then the backing per OHM decreases.&lt;/p&gt;
&lt;h3 id=&quot;modelling-the-premium&quot;&gt;Modelling the Premium&lt;/h3&gt;
&lt;p&gt;There is one question that all of the above doesn&amp;#39;t really answer directly ‚Äî how
large should the premium be?&lt;/p&gt;
&lt;p&gt;Well, imagine all investors run the above calculation. Each of them will come up
with their own &amp;quot;acceptable&amp;quot; premium. In our example that would have been 68.5%
(&lt;code&gt;(168.5 - 100) / 100&lt;/code&gt;). The actual premium will be the premium such that no one
will sell any investor OHM with a premium lower than their premium of choice.&lt;/p&gt;
&lt;p&gt;In (the messy and complex) reality, investors will need to try to anticipate
what this premium will be in order to price their own premium of choice. This
makes the whole market pricing affair a reflective process known as a &lt;a href=&quot;https://en.wikipedia.org/wiki/Keynesian_beauty_contest&quot;&gt;Keynesian
beauty contest&lt;/a&gt;. If you&amp;#39;re more mathematically inclined, you could also
say the market price is the result of a &lt;a href=&quot;https://en.wikipedia.org/wiki/Fixed_point_(mathematics)&quot;&gt;fixed-pointed computation&lt;/a&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Now, we could also look at the premium from another angle. And that is: how is
the premium expected to change as the treasury increases or decreases?&lt;/p&gt;
&lt;p&gt;The key question is whether the premium should be flat (since the team&amp;#39;s ability
to deliver new successful projects is only very weakly correlated with the size
of the treasury), or proportional to the treasury size (in the case of venture
capital investments).&lt;/p&gt;
&lt;p&gt;Since both of these make sense, a simple model of the premium would be one where
the premium decreases as the treasury grow. In this model, the excess value
incurred by the premium (i.e. &lt;code&gt;premium * sustainable_treasury&lt;/code&gt;) grows along with
the treasury, but at a decreasing rate. Think of square-root like functions.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://norswap.com/olympus-econ/square_root.svg&quot; alt=&quot;square root function&quot;&gt;&lt;/p&gt;
&lt;p&gt;This decrease in growth represents the fact that the team&amp;#39;s potential does not
increase linearly with the treasury (you could hire more people, but it&amp;#39;s well
established that company productivity does not scale linearly with the number of
hires). It also represents the fact that there are diminishing returns when you
sling around a large amount of capital: the yield farming returns tend to be
lower, which decreases your edge on the &amp;quot;risk-free&amp;quot; rate. Similarly, quality
venture capital opportunities might dry up.&lt;/p&gt;
&lt;p&gt;A more complete model should probably take into account that if the treasury
value is low, then the premium should grow faster than the treasury (as it
enables new essential hires, new venture capital opportunities, etc). However,
Olympus&amp;#39; treasury is already large ($484M), so we&amp;#39;ll eschew this part of the
model.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Ok. All good and fair, but concretely, what would a good premium be for Olympus
today?&lt;/p&gt;
&lt;p&gt;One answer to that is that you just run the price calculation from above. But to
do that, you need to estimate what the premium will be!&lt;/p&gt;
&lt;p&gt;Well, I&amp;#39;m a bit of a loss here.&lt;/p&gt;
&lt;p&gt;First of all, investors are not rational, and I feel fairly confident to say
many (most?) of them never really did understood how Olympus worked. The price
is still a reflective process of investor&amp;#39;s willingness to pay, but without
common knowledge (such as this blogpost! though at this point I have to wonder
how many investors will read this novel I have written), it&amp;#39;s hard to know what
investors will think ‚Äî more likely their willingness to pay will be ruled by
momentum, hype, FOMO and FUD.&lt;/p&gt;
&lt;p&gt;The current premium of 25% over the market rate doesn&amp;#39;t feel particularly
extreme to me, neither does it feel particularly low. Note that this is a
premium over the &lt;em&gt;market value&lt;/em&gt;, not the &lt;em&gt;sustainable value&lt;/em&gt; (which I haven&amp;#39;t
computed ‚Äî reach out if you feel like doing that!).&lt;/p&gt;
&lt;p&gt;Looking at Olympus Pro, it has so far yield about $2M in fees, or about 0.5% of
the treasury size. Since it was introduced 4 months ago, we can extrapolate that
it will yield about 1.5% of the treasury value over a year. If the Olympus team
introduces some new products, these returns could start adding up.&lt;/p&gt;
&lt;p&gt;Additionally, one should look at the returns that OlympusDAO is getting on its
&lt;a href=&quot;https://twitter.com/quasicypher1/status/1486737670088896517&quot;&gt;yield farming activities&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you have opinions on this (backed with data) ‚Äî I&amp;#39;d be interested to talk to
you!&lt;/p&gt;
&lt;h2 id=&quot;olympus-in-the-long-run&quot;&gt;Olympus in the Long Run&lt;/h2&gt;
&lt;p&gt;How can we expect Olympus to behave in the long run?&lt;/p&gt;
&lt;p&gt;Well, the fact of the matter is that OHM is designed to inflate until its price
drops to 1$. This path could however be stretched indifinitely if the team
decides to drastically lower the rebase rate. If they lower this rate enough,
then the earnings from fees on bond sales (both from Olympus and Olympus Pro),
the treasury value could increase faster than OHM dilutes.&lt;/p&gt;
&lt;p&gt;In the case where the rebase rate stays high, then OHM will decrease in price
until it reaches 1$. This is not super relevant: as I&amp;#39;ve argued before, it&amp;#39;s the
price of gOHM (indexed, inflation-protected OHM) that is relevant!&lt;/p&gt;
&lt;p&gt;When the price of OHM reaches 1$, a backstop prevents any further inflation,
whether via discounted bounding or via rebasing. This would be rather crippling
for the protocol so I would expect the team to take some measures before that
happens (whether that&amp;#39;s curbing the rebase rate, or something else).&lt;/p&gt;
&lt;p&gt;Other than that... it could continue chugging along and raising money via bond
sales. At the end of the day, gOHM is a voucher to a portion of the underlying
treasury and a call option to speculate on the fluctuation of the premium.&lt;/p&gt;
&lt;p&gt;The real question for Olympus and OHM holders is what the team is going to come
out with next! The team has plans, see the &lt;a href=&quot;https://norswap.com/olympus-econ/#further-reading&quot;&gt;Further Reading&lt;/a&gt;
section!&lt;/p&gt;
&lt;p&gt;As for questions of price, there are two questions of interest:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;How fast can the sustainable treasury value increase?&lt;/li&gt;
&lt;li&gt;How will the premium evolve?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;At present, the answer to (2) is purely a question of market psychology, meaning
keeping a finger on the pulse of the hype. Crypto markets are not super mature
yet, and Olympus is still relatively niche amongst crypto markets.&lt;/p&gt;
&lt;p&gt;More surprisingly, (1) similarly depends and on the premium, and thus on hype.
When the premium is high, the sustainable treasury value increases rapidly.
Similarly, I would expect more bonds to be sold when the hype is high and the
price is on the uptrend.&lt;/p&gt;
&lt;h2 id=&quot;on-the-uselessness-of-rebases&quot;&gt;On the Uselessness of Rebases&lt;/h2&gt;
&lt;p&gt;At this point, I want to emphasize something that has been implied, but hasn&amp;#39;t
been made crystal clear at this point: staking and rebases are absolutely
useless in Olympus, and serve no purpose besides creating hype and a narrative
based on widespread misunderstanding of Olympus&amp;#39; mechanics.&lt;/p&gt;
&lt;p&gt;As an Olympus dev &lt;a href=&quot;https://twitter.com/_nd_go/status/1488060799096696833&quot;&gt;says&lt;/a&gt;: &amp;quot;I think one of the biggest mistakes the
DAO made was allowing the APY become the focus of anything.&amp;quot;&lt;/p&gt;
&lt;p&gt;Basically, staking protects the inflation created by rebases. It&amp;#39;s both the
poison and the cure.&lt;/p&gt;
&lt;p&gt;Since not 100% of the supply is staked, staking does entail a transfer of
ownership from non-stakers to stakers. But as mentionned before, it&amp;#39;s likely
that most of the unstaked supply lives in LP pools whose tokens are owned by the
Olypus treasury. Which means the small ownership increase gets cancelled by a
loss of value of the treasury.&lt;/p&gt;
&lt;p&gt;One thing this achieves, however is to disincentivize anyone but Olympus to
provide liquidity. I&amp;#39;m not sure how good or bad that is... On the one hand,
Olympus can monopolize the transfer fees, on the other hand, that&amp;#39;s just less
liquidity period.&lt;/p&gt;
&lt;p&gt;This last point is also moot with the introduction of gOHM since you can now
provide liquidity for gOHM which wraps staked OHM.&lt;/p&gt;
&lt;p&gt;In general, the whole existance of gOHM calls the usefulness of rebases into
question, since it abstracts away the whole rebase/staking mechanic.&lt;/p&gt;
&lt;p&gt;I think rebases (inherited from &lt;a href=&quot;https://www.ampleforth.org/&quot;&gt;Ampleforth&lt;/a&gt;) were included because OHM was
envisioned as some kind of stablecoin. But at present, Olympus doesn&amp;#39;t perform
rebases that lower user balances (which would be necessary to let the price dip
below 1$ and bring it back to that level).&lt;/p&gt;
&lt;h2 id=&quot;on-the-usefulness-of-bonding&quot;&gt;On The Usefulness of Bonding&lt;/h2&gt;
&lt;p&gt;We haven&amp;#39;t talked about this much, but one of Olympus&amp;#39; big idea was &amp;quot;buy
liquidity, don&amp;#39;t rent it&amp;quot;.&lt;/p&gt;
&lt;p&gt;This is based on the observation that liquidity providers can be quite
mercenary, and will move their liquidity elsewhere once incentivization stops.
Hence you&amp;#39;re only ever &amp;quot;renting liquidity&amp;quot;. And as we all know, in the long
term, renting is more expensive than buying outright.&lt;/p&gt;
&lt;p&gt;The idea makes a lot of sense, and for projects where you can expect a high
enough premium, bonding can make a lot of sense.&lt;/p&gt;
&lt;p&gt;It solves two fundamental problems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Raising all the capital upfront means good project get a bad deal. Since your
project is completely unproven, it will necessarily be valued with a lot of
circonspection. (Although sometimes, the opposite is true, where project is
overvalued on the basis of hype...) Raising money as you go with bonds, in a
way that is not (or not very) dilutive to token holders can make a lot of
sense for growth-oriented projects.&lt;/li&gt;
&lt;li&gt;It removes the problem of deciding when, how, how much, and from who to raise.
(Olympus&amp;#39; founder Zeus made &lt;a href=&quot;https://twitter.com/ohmzeus/status/1479888653304303617&quot;&gt;this very same point&lt;/a&gt;). Instead, the
decision is made by a pre-determined algorithm. An hybrid mode is possible,
where a project decides on a number of bonds to be sold, and lets the
algorithm figure out the execution.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now, some caveats.&lt;/p&gt;
&lt;p&gt;First of all, not every project is shaped as Olympus, i.e. as a big pot of
money. Many project pass their revenues directly to the users, and only keep a
small amount in the treasury (which are equivalent to the Olympus&amp;#39;s DAO funds).
The model can still work for these project, but the premium has to be modelled
on the basis of return on capital instead.&lt;/p&gt;
&lt;p&gt;Second, it&amp;#39;s not quite clear that the way Olympus does bond sales (on the basis
of the bond control value and the debt ratio) is necessarily the best way. I can
imagine much simpler mechanisms to achieve the same goals (e.g. a &lt;a href=&quot;https://en.wikipedia.org/wiki/Dutch_auction&quot;&gt;Dutch
auction&lt;/a&gt; where each successful purchase bumps the price back up). The model is
not obviously wrong either, it&amp;#39;s just not obvious (to me) that it is the best.&lt;/p&gt;
&lt;p&gt;I do expect that Olympus Pro offers more flexibility on this matter, but I
haven&amp;#39;t reviewed that codebase.&lt;/p&gt;
&lt;h2 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://fbifemboy.substack.com/p/a-correct-model-of-olympus-dao&quot;&gt;A correct model of OlympusDAO&lt;/a&gt;: A harsher (but oh so much
terser) criticism of OlympusDAO than I make, to which I nevertheless subscribe
excepted for valuation purposes. The memes criticized here are not dead
though, as evidenced by &lt;a href=&quot;https://twitter.com/ishaheen10/status/1495286382964576256&quot;&gt;this presentation&lt;/a&gt; of OHM (which isn&amp;#39;t bad,
but parrots the kool-aid a bit too much).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://twitter.com/ohmzeus/status/1486886116598890498&quot;&gt;Zeus on Healthy Debt&lt;/a&gt;: the cascading liquidations of loans
secured against an OHM collateral was a big driver in the OHM price crash.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://hackmd.io/@HMyg0dxkQ96YOMpI30o8PA/mbga&quot;&gt;Liquid Interest Rate Markets through Olympus Bonds&lt;/a&gt; (+ &lt;a href=&quot;https://forum.olympusdao.finance/d/1061-exploring-a-bond-centric-future&quot;&gt;governance
discussion&lt;/a&gt;): A whitepaper by Zeus and Indigo from the Olympus team.
It proposes &amp;quot;an evolution from the existing staking-centric model in favor of
a bond-centric model&amp;quot;, showing that the OlympusDAO leadership is aware of the
issues raised in this piece. I&amp;#39;m under the impression they willingly downplay
(or maybe are still deluded about) the uselessness of staking while at the
same time phasing it out in favour of &amp;quot;internal OHM bonds&amp;quot; which are
fixed-term bonds purchased in OHM that give a return in OHM (just like US
treasury bonds, but using OHM instead of USD). The big advantage there is
locking away the part of the supply used to purchase bonds (whereas staking if
fully liquid ‚Äî users can stake and unstake instantly). Another one is that you
can emit many more bonds (and thus grow the treasury faster), because it turns
out most bond purchasers unstake &amp;amp; sell OHM to buy bonds (I had no idea!),
essentially arbitraging bonding against staking. This whitepaper covers much
more and honestly deserves its own article!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://olympusdao.medium.com/olympus12-building-a-strong-ecosystem-around-a-web3-native-reserve-currency-416f58175e74&quot;&gt;Olympus12: Building a Strong Ecosystem Around a Web3-Native Reserve
Currency&lt;/a&gt;: outlines a strong (imho) and extremely interesting
action plan for bolstering the economics of OlympusDAO going forward. I do
think the success of the plan hinges on whether they will manage to convince
projects and people to effectively treat OHM (more like gOHM) as a token to
put on the balance sheet / in their long-term portfolio, and not just
speculation &amp;amp; arbitrage. With the right mix of incentives and interesting use
cases, they might be able to.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;coda&quot;&gt;Coda&lt;/h2&gt;
&lt;p&gt;And that&amp;#39;s a wrap! Thanks for following this far! If you&amp;#39;ve liked this, you
might like some of my other &lt;a href=&quot;https://norswap.com/finance&quot;&gt;finance writings&lt;/a&gt;. If you want to keep up with my
new stuff, subscribe to the RSS feed or &lt;a href=&quot;https://twitter.com/norswap&quot;&gt;follow me on Twitter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I hope that after reading this, you&amp;#39;ll understand a bit better how Olympus
behaves economically and how it can be valued.&lt;/p&gt;
&lt;p&gt;To conclude with some more personal opinions, I think OlympusDAO was a project
whose theory was pretty ill-conceived. You can tell by the confused discourse
around it (including the official discourse), and the uselessness of staking as
a mechanic. Ironically, this confusion and the high APY hype allowed it to be
successful.&lt;/p&gt;
&lt;p&gt;Nevertheless, the bonding mechanism is pretty solid and interesting. And am I
impressed by the humility of the team and the plan they are making to further
improve the project. I would be surprised is this is the last we heard of
OlympusDAO.&lt;/p&gt;
      </description>
      <pubDate>2022-02-27T23:00:00.000Z</pubDate>
      <link>http://norswap.com/olympus-econ</link>
      <guid isPermaLink="true">http://norswap.com/olympus-econ</guid>
    </item>
    <item>
      <title>ZK Rollups vs Optimistic Rollups</title>
      <description>
&lt;p&gt;This was originally a &lt;a href=&quot;https://twitter.com/norswap/status/1494763568843132931&quot;&gt;tweet thread&lt;/a&gt; that I have reproduced here for
discoverability and archive purposes (the copy was done on 23 October 2022).&lt;/p&gt;
&lt;p&gt;I&amp;#39;ve only slightly reformatted the text (mostly links) and updated the line of
code statistics.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;1/ At EthDenver, people keep asking me on my perspective on optimistic rollups
vs zkRollups. Unfortunately, zkRollups have managed to occupy the whole
narrative space, so here&amp;#39;s a take that is a bit more nuanced!&lt;/p&gt;
&lt;p&gt;2/ The first advantages of zkRollups is a lower L1 calldata part of the fee.
There a two important caveats:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The advantage is probably less than you think, see &lt;a href=&quot;https://twitter.com/norswap/status/1494456477246844928&quot;&gt;this thread to understand why&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Optimistic rollups have an advantage in non-calldata L1 cost, and in L2 cost.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;3/ A zkRollup needs to run the prover for every transaction, which has massive
overheads (~ 10000x). On the other hand, &lt;a href=&quot;https://github.com/ethereum-optimism/cannon/&quot;&gt;Cannon&lt;/a&gt;&amp;#39;s MIPS-compiled validator has
10x overhead, and this would disappear if we ran it on MIPS hardware.&lt;/p&gt;
&lt;p&gt;4/ zkRollups also need to verify the zk proof on chain, which entails L1 gas
costs on top of the calldata. The next version of Optimism (Bedrock) is going to
be almost 100% calldata cost.&lt;/p&gt;
&lt;p&gt;5/ We&amp;#39;re working hard to lower L1 calldata costs for all rollups. We want to
help bring &amp;quot;blob-carrying transactions&amp;quot; to Ethereum in the Shangai hardfork.&lt;/p&gt;
&lt;p&gt;See Vitalik Buterin&amp;#39;s &lt;a href=&quot;https://notes.ethereum.org/@vbuterin/blob_transactions&quot;&gt;explanation of blobs&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;6/ With blobs, calldata costs would likely lower 1Norswap üè¥‚Äç‚ò†Ô∏èüî¥‚ú®
@norswap
¬∑
Feb 1800x (since rollups would be
the only ones seriously competing for this calldata space).&lt;/p&gt;
&lt;p&gt;Suddenly, non-calldata costs would become dominant, and opRollups would have the
upper hand!&lt;/p&gt;
&lt;p&gt;7/ To be fair, this would likely revert in the long term as rollups become the dominant way to transact.&lt;/p&gt;
&lt;p&gt;But it&amp;#39;s still not clear to me that zkRollups will necessarily be cheaper, and
it&amp;#39;s downright doubtful they will be significantly cheaper.&lt;/p&gt;
&lt;p&gt;8/ As an aside, blobs are like a primitive version of &amp;quot;danksharding&amp;quot; (named after the wonderful @dankrad
), which is itself an easier version of full sharding. Find all about this
&lt;a href=&quot;https://notes.ethereum.org/@hww/workshop_feb_2022&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;9/ The second advantage of zkRollups is the absence of a withdrawal period.&lt;/p&gt;
&lt;p&gt;This advantage is also a curse. You might know that Optimism recently paid the
&lt;a href=&quot;https://twitter.com/optimismFND/status/1491821983796895747&quot;&gt;largest bug bounty&lt;/a&gt; in history (2M$) for an infinite money bug.&lt;/p&gt;
&lt;p&gt;10/ But if the bug had been exploited, the withdrawal period would have allowed
us to rollback the chain to mitigate the damage.&lt;/p&gt;
&lt;p&gt;11/ At the moment this is possible because the system is permissioned (as are
all rollups), but in the future, some form of governance could easily take this
decision within 7 days.&lt;/p&gt;
&lt;p&gt;12/ Economic bridges provide enough liquidity for most uses, and would be rekt
in case of such a hack, but they do not have enough liquidity for an attacker to
drain the chain.&lt;/p&gt;
&lt;p&gt;13/ If this happened on a zkRollup instead, the exploiter could just immediately
drain the whole rollup.&lt;/p&gt;
&lt;p&gt;The zkProof wouldn&amp;#39;t save you: it&amp;#39;s happy to prove a buggy program/contract ran correctly.&lt;/p&gt;
&lt;p&gt;14/ What about some advantages of opRollups?&lt;/p&gt;
&lt;p&gt;For one, they&amp;#39;re much simpler to understand and audit.&lt;/p&gt;
&lt;p&gt;They are only a handful of people in the world capable of auditing the zk prover and verifier logic.&lt;/p&gt;
&lt;p&gt;15/ Not only that, but optimistic designs can be incredibly tiny and elegant.&lt;/p&gt;
&lt;p&gt;In Bedrock, we&amp;#39;re on track to implement the system with &lt;a href=&quot;https://github.com/ethereum-optimism/op-geth&quot;&gt;less than one thousand
lines of code on top of Geth&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;16/ The node itself (the part responsible for deriving the L2 chain from L1) is
less than 20k lines of code.&lt;/p&gt;
&lt;p&gt;We could probably cut that a lot if we weren&amp;#39;t using Go and its notoriously
verbose error-checking üòÅ&lt;/p&gt;
&lt;p&gt;17/ To be clear, I like zero knowledge proofs. We&amp;#39;re not shy about using them,
if and when it makes sense.&lt;/p&gt;
&lt;p&gt;e.g. I&amp;#39;m thinking about using a zkProof to aggregate ECDSA signatures &amp;amp; reduce
our calldata size. (Hit me up if you know how!)&lt;/p&gt;
&lt;p&gt;18/ I wish a lot of success to our zk competitors. The improvement they make to
the technology is a net positive for all of us.&lt;/p&gt;
&lt;p&gt;But to claim that ZK is the only way in the future (and even moreso, the only
way now) is intellectually dishonest. The truth is much more nuanced.&lt;/p&gt;
&lt;p&gt;19/ tl;dr&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;opRollups are cheaper on non-calldata cost&lt;/li&gt;
&lt;li&gt;opRollups will be cheaper with blobs transactions&lt;/li&gt;
&lt;li&gt;long-terms fees are less clear, but there shouldn&amp;#39;t be a huge difference&lt;/li&gt;
&lt;li&gt;the withdrawal period is a protection against attacks&lt;/li&gt;
&lt;li&gt;opRollups MUCH easier to audit&lt;/li&gt;
&lt;/ul&gt;
      </description>
      <pubDate>2022-02-17T23:00:00.000Z</pubDate>
      <link>http://norswap.com/zk-vs-optimistic</link>
      <guid isPermaLink="true">http://norswap.com/zk-vs-optimistic</guid>
    </item>
    <item>
      <title>Olympus DAO from Primary Sources</title>
      <description>
&lt;p&gt;If you&amp;#39;re following &lt;a href=&quot;https://ethereum.org/en/defi/&quot;&gt;decentralized finance (aka DeFi)&lt;/a&gt;, you&amp;#39;ve probably heard
about &lt;a href=&quot;https://www.olympusdao.finance/&quot;&gt;OlympusDAO&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;OlympusDAO describes itself as a &amp;quot;decentralized reserve currency&amp;quot;. In the
non-crypto worlds, a &lt;a href=&quot;https://en.wikipedia.org/wiki/Reserve_currency&quot;&gt;reserve currency&lt;/a&gt; is a foreign currency held by other
governments to back and stabilized their own currency. Interestingly, OHM is
itself a currency backed by a reserve (&amp;quot;the treasury&amp;quot;) of other assets (mostly
stablecoin and OHM-stable &lt;a href=&quot;https://www.google.com/search?hl=en&amp;amp;q=lp%20tokens&quot;&gt;LP tokens&lt;/a&gt;, but also some ETH). I don&amp;#39;t think Olympus
works as a reserve currency at all, but I will defer this discussion to another
article.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In this article, I want to look at what Olympus actually does, and I want to
do so by digging straight into the code.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I&amp;#39;m doing this because OlympusDAO has been the subject of a lot of talk over its
short history, but I never really manage to understand how it works. There is a
lot of narrative to be found, but very little mechanistic explanations ‚Äî at
least not enough to answer most of my question. What I read about it also didn&amp;#39;t
seem to make sense from an economic standpoint, but this was impossible to
determine without establish ground truth on OlympusDAO&amp;#39;s inner workings.&lt;/p&gt;
&lt;p&gt;So why were people talking about Olympus you ask? First, look at this chart:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://norswap.com/olympus/ohm-price.png&quot; alt=&quot;OHM price chart&quot;&gt;&lt;/p&gt;
&lt;p&gt;Quite volatile (up 4x, down 6x, up 6x, down 12x), but nothing extraordinary for
crypto. No, what is incredible is that this is while OlympusDAO was offering
&lt;a href=&quot;https://hackernoon.com/earning-passive-income-with-defi-staking-an-overview-4a1y3720&quot;&gt;stakers&lt;/a&gt; interest rates (aka &lt;a href=&quot;https://www.investopedia.com/terms/a/apy.asp&quot;&gt;APY&lt;/a&gt;) of thousands of percents (&amp;gt; 1700% as we
speak). These interest rates are, importantly, denominated in OHM. Who wouldn&amp;#39;t
be enticed?&lt;/p&gt;
&lt;p&gt;However, all of this comes with a caveat, in a word: inflation.&lt;/p&gt;
&lt;p&gt;Over the last week, OlympusDAO (and its forks, most notably &lt;a href=&quot;https://www.wonderland.money/&quot;&gt;Wonderland&lt;/a&gt;) have
come under fire for the massive drop in prices they have experienced, putting
the market cap of OHM very close to the value of its treasury (which logically
is the smallest possible price, just how a company should at least be worth at
least at much as its assets minus its debts). Wonderland even periodically
dipped under its treasury value.&lt;/p&gt;
&lt;p&gt;The market capitalization chart (which is in many ways much more relevant than
the price charts, because of inflation) for OHM tells of its meteoric rise, and
recent fall:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://norswap.com/olympus/ohm-market-cap.png&quot; alt=&quot;OHM market capitalization chart&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In a subsequent article, I will dive deep into the economics of OlympusDAO and
how the current situation is not all that surprising.&lt;/strong&gt; I will say right now
that I do not think Olympus is a scam or a ponzi scheme (which many people
accuse it of being). I do think the communication about the project has been
somewhat deceitful. At the very least, impressive elements ‚Äî like the
OHM-denominated APY ‚Äî have been emphasized, while immense caveats have been
ommitted from the discourse.&lt;/p&gt;
&lt;h2 id=&quot;summary-of-findings&quot;&gt;Summary of Findings&lt;/h2&gt;
&lt;p&gt;This is going to be a long and technical article. For those that are just
interested in the take aways, here they are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The total supply of $OHM inflates at the &lt;em&gt;staking reward rate&lt;/em&gt; every ~8
hours. This inflation is redistributed among stakers. The inflation
distribution event that happens every 8 hours is called &lt;em&gt;a rebase&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;The staking reward rate is set by the OlympusDAO policy team. For the longest
time, this reward rate was 0.35%. It is currently 0.2%, on its way down to a
target of 0.16%. At 0.35%, this implies an inflation of 4487%. This is also
the minimum staking APY in OHM (if 100% of the OHM is staked, otherwise it
will be higher). At 0.16%, this implies a 475% inflation (yup ‚Äî exponentials
are weird).&lt;/li&gt;
&lt;li&gt;OlympusDAO has a treasury composed of stablecoins and OHM-stablecoin
&lt;a href=&quot;https://www.gemini.com/cryptopedia/what-is-a-liquidity-pool-crypto-market-liquidity&quot;&gt;liquidity pool (LP) tokens&lt;/a&gt;. The treasury is constituted by
selling bonds (see below).&lt;/li&gt;
&lt;li&gt;A central concept is the &amp;quot;risk-free value&amp;quot; (RFV) of the treasury. This is simply
1$ for stablecoin. For LP tokens, it is the price the token would take if the
OHM price fell to 1$. Controversially, this means that part of the RFV of the
treasury is made of OHM tokens (in the liquidity pools).&lt;/li&gt;
&lt;li&gt;Rebases can only go through if there is 1$ of risk-free value in the treasury
for each OHM in existence including the newly-minted ones. This sets a
soft-floor if 1$ on the OHM price, assuming that the OHM market cap should
always be at least as large as the risk-free value of the OHM treasury.&lt;/li&gt;
&lt;li&gt;The protocol maintains a metric called &amp;quot;the index&amp;quot; which is how much OHM you
would own if you staked a single OHM on the day the protocol launched
(currenty 74). Recently, Olympus launched the gOHM (&amp;quot;governance OHM&amp;quot;) which
&amp;quot;wraps&amp;quot; the indexed amount of staked OHM. The main avowed purpose was to
enable the trading of staked OHM on other chains.&lt;/li&gt;
&lt;li&gt;Staking comes with an optional warm-up period (currently disabled) which
forces people to wait a configurable amount of time before their OHM tokens
are staked.&lt;/li&gt;
&lt;li&gt;At any time, people can purchase OHM bonds using various stablecoins and
OHM-stablecoin &lt;a href=&quot;https://www.google.com/search?hl=en&amp;amp;q=lp%20tokens&quot;&gt;LP tokens&lt;/a&gt;. The policy team can add, remove or tweak these
bond markets. The bonds are usually sold as a small discount to
the OHM market price. The bonds grant newly minted OHM tokens to the buyer.
These tokens vest over a configurable period, which has always been 5 days.&lt;/li&gt;
&lt;li&gt;The DAO takes a (configurable) fee over every bond sale, although this is
currently set to 0, and it&amp;#39;s rather hard to search historical state to see if
it was ever set differently.&lt;/li&gt;
&lt;li&gt;Bond pricing uses a notion of risk-free value (RFV). The risk-free value of
stablecoins is equivalent to their market value. For LP tokens however,
Olympus assumes a worst-case scenario where OHM is worth 1$, and prices the
LP tokens accordingly.&lt;/li&gt;
&lt;li&gt;Bonds are priced differently depending on the token used to purchase the
bonds. The bond price is determined by the formula &lt;code&gt;bondPrice = min(BCV * debtRatio + 1, minimumPrice)&lt;/code&gt;, where:&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;One bond grants one OHM after the vesting period.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For simplicity, I ignore the decimals on &lt;code&gt;minimumPrice&lt;/code&gt; and &lt;code&gt;bondPrice&lt;/code&gt;
(assume those are infinite precision numbers), and assume that &lt;code&gt;debtRatio&lt;/code&gt;
is a value between 0 and 1.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;BCV&lt;/code&gt; is the bond control variable, set by the policy team for each token&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;debtRatio&lt;/code&gt; is a ratio between (a) the risk-free value of all tokens used for
bond purchases (tallied at the moment of purchase) scaled by the remaining
vesting time; and (b) the total OHM supply.&lt;/p&gt;
&lt;p&gt;Note that the numerator and the denominator have different units (risk-free
USD and OHM), and consequently, the debt ratio rises faster when the OHM
price is high.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;minimumPrice&lt;/code&gt; ‚Äî as the name indicates. However, once a bond purchases occurs
above the minimum price, it is then set to 0, allowing subsequent purchases
to occur below the bond price.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;   There is maximum amount of debt (denominated in risk-free value) allowed per
   token, preventing the emission of too many bonds, and offering some
   protection against attacks (e.g. if a stablecoin was to lose his peg).&lt;/p&gt;
&lt;p&gt;   Because the formula is not based on the market price of OHM, the bond price
   can occasionally exceed the market price!&lt;/p&gt;
&lt;p&gt;I tried to explicitly stay away from the economical implications. As said
before, these will be the subject of a subsequent article!&lt;/p&gt;
&lt;p&gt;In what follows, I will dive into the contracts themselves. Together, we&amp;#39;ll
learn where all of the above functionality is implemented, and how.&lt;/p&gt;
&lt;h2 id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#&quot;&gt;Top&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#summary-of-findings&quot;&gt;Summary of Findings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#olympus-v11-vs-olympus-v2&quot;&gt;Olympus v1.1 vs Olympus v2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#contracts&quot;&gt;Contracts&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#v11-contracts&quot;&gt;v1.1 Contracts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#v2-contracts&quot;&gt;v2 Contracts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#upgrade-paths&quot;&gt;Upgrade Paths&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#basics--staking&quot;&gt;Basics &amp;amp; Staking&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#intro-to-rebases--sohm-balances&quot;&gt;Intro to Rebases &amp;amp; sOHM Balances&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#staking--unstaking&quot;&gt;Staking &amp;amp; Unstaking&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#rebases-in-depth&quot;&gt;Rebases in Depth&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#locker&quot;&gt;Locker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#sohm-index&quot;&gt;sOHM Index&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#bonding&quot;&gt;Bonding&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#stablecoin-bond-pricing&quot;&gt;Stablecoin Bond Pricing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#liquidity-token-bond-pricing&quot;&gt;Liquidity Token Bond Pricing&lt;/a&gt;
(This section explains the Risk-Free Value computation for bonds.)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#bonding-in-depth&quot;&gt;Bonding in Depth&lt;/a&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#1-checking-against-the-maximum-debt&quot;&gt;Checking against the maximum debt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#2-calculate-the-bond-price&quot;&gt;Calculate the bond price&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#3-calculate-the-market-value-USD-bond-price&quot;&gt;Calculate the market-value USD bond price&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#4-calculate-the-payout-and-dao-fee&quot;&gt;Calculate the payout and DAO fee&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#5-mint-ohm-for-payout-and-dao-fee&quot;&gt;Mint OHM for payout and DAO fee&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#6-pay-the-dao-and-perform-book-keeping&quot;&gt;Pay the DAO and perform book-keeping&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://norswap.com/olympus/#example&quot;&gt;Example&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;olympus-v11-vs-olympus-v2&quot;&gt;Olympus v1.1 vs Olympus v2&lt;/h2&gt;
&lt;p&gt;The present investigation was on conducted on the 1.1 version of the protocol.
This is because I started this a long time ago in mid-December, and didn&amp;#39;t
realize that the &lt;a href=&quot;https://olympusdao.medium.com/introducing-olympus-v2-c4ade14e9fe&quot;&gt;v2 of the protocol&lt;/a&gt; was already launched, &lt;em&gt;excepted&lt;/em&gt; the v2
bonds (which are now live too).&lt;/p&gt;
&lt;p&gt;Olympus v1.1 was apparently intended as an intermediary milestone to facilitate
the deployment of v2.&lt;/p&gt;
&lt;p&gt;The particular code I investigated is &lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/tree/Version-1.1/&quot;&gt;the 1.1 codebase&lt;/a&gt; as can be
found in the &lt;code&gt;Version-1.1&lt;/code&gt; branch on Github.&lt;/p&gt;
&lt;p&gt;Annoyingly, it looks like not all the code of that repository was deployed as
such. For instance, the OHM contract is not identical to &lt;a href=&quot;https://etherscan.io/address/0x383518188c0c6d7730d91b2c03a03c837814a899#code&quot;&gt;its first
deployment&lt;/a&gt; (verified in March 2021) nor to &lt;a href=&quot;https://etherscan.io/address/0x64aa3364F17a4D01c6f1751Fd97C2BD3D7e7f1D5#code&quot;&gt;its second
deployment&lt;/a&gt; (verified in December 2021 and matching the v2
code).&lt;/p&gt;
&lt;p&gt;If you want to investigate the latest deployed v2 codebase, check out &lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/tree/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9&quot;&gt;the tree
at this commit&lt;/a&gt;, which merges in the v2 bonds.&lt;/p&gt;
&lt;p&gt;That being said, as far as I was able to determine, &lt;strong&gt;the protocol did not change
significantly between v1.1 and v2&lt;/strong&gt;. The major change seems to be that bonds no
longer vest linearly but immediately stake OHM which can be redeemed at expiry
(this will be repeated below, in the appropriate context).&lt;/p&gt;
&lt;p&gt;The other change is the start of on-chain governance via the gOHM token
(representing an indexed amount of sOHN, as mentionned in the take-aways). This
doesn&amp;#39;t affect the behaviour of contracts, however.&lt;/p&gt;
&lt;p&gt;If you follow throught this article, you&amp;#39;ll have a thorough enough understanding
that understanding the v2 contracts should be a breeze.&lt;/p&gt;
&lt;p&gt;The v2 codebase seems vastly improved, and most likely assuages some of the
complaints I make below!&lt;/p&gt;
&lt;p&gt;You might also want to read &lt;a href=&quot;https://blog.oighty.com/olympus-v2-bonds&quot;&gt;this deep dive on Olympus v2 bonds&lt;/a&gt;
for an alternative analysis, focused on v2.&lt;/p&gt;
&lt;h2 id=&quot;contracts&quot;&gt;Contracts&lt;/h2&gt;
&lt;p&gt;Before we dig into the protocol&amp;#39;s internals, let&amp;#39;s inventorize the contracts,
both for v1.1 and v2 deployments. In particular, &lt;a href=&quot;https://docs.olympusdao.finance&quot;&gt;the OlympusDAO
documentation&lt;/a&gt; is not yet updated to list the addresses of the v2
contracts.&lt;/p&gt;
&lt;p&gt;If you consult the doc, you&amp;#39;ll note that some contracts have many versions which
are dubbed v1, v2, v3, v4, ... It goes without saying that these version bear no
relationship to the protocol versions (v1.1, v2, ...).&lt;/p&gt;
&lt;p&gt;As said earlier, the v1.1 source does not always match the deployment (some
contracts were tweaked that were not deployed), so it may happen that the source
file I link does not match the deployed contract. You can check this by
comparing the verified source code in the contract/code tab agains the GitHub
source.&lt;/p&gt;
&lt;h3 id=&quot;v11-contracts&quot;&gt;v1.1 Contracts&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x383518188c0c6d7730d91b2c03a03c837814a899#code&quot;&gt;OlympusERC20.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/OlympusERC20.sol&quot;&gt;source&lt;/a&gt;)&lt;ul&gt;
&lt;li&gt;Owned by &lt;a href=&quot;https://etherscan.io/address/0x763a641383007870ae96067818f1649e5586f6de&quot;&gt;this EOA address&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x04f2694c8fcee23e8fd0dfea1d4f5bb8c352111f#code&quot;&gt;sOlympusERC20.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/sOlympusERC20.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xFd31c7d00Ca47653c6Ce64Af53c1571f9C36566a#code&quot;&gt;Staking.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/Staking.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xC8C436271f9A6F10a5B80c8b8eD7D0E8f37a612d#code&quot;&gt;StakingHelper.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/StakingHelper.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x2882a5cd82ac49e06620382660f5ed932607c5f1#code&quot;&gt;StakingWarmup.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/StakingWarmup.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xC58E923bf8A00E4361FE3f4275226a543D7D3ce6#code&quot;&gt;StakingDistributor.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/Version-1.1/contracts/StakingDistributor.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;Treasury.sol&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In v1.1, there is one bonding contract per token that can be used to purchase
bonds. I will only list the DAI and OHM-DAI contracts, to serve as examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://archive.fo/KkeeN&quot;&gt;List of Bond Contracts&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;e.g. &lt;a href=&quot;https://etherscan.io/address/0x575409F8d77c12B05feD8B455815f0e54797381c#code&quot;&gt;DAI Bond&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;e.g. &lt;a href=&quot;https://etherscan.io/address/0x956c43998316b6a2F21f89a1539f73fB5B78c151#code&quot;&gt;OHM/DAI LP Bond&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Bond Calculator Contract&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xcaaa6a2d4b26067a391e7b7d65c16bb2d5fa571a#code&quot;&gt;older deployment used by the newest OHM/DAI LP bond&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x7b1a5649145143f4fad8504712ca9c614c3da2ae#code&quot;&gt;newer deployment used by the newest OHM/FRAX LP bond&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;the code in those two are exactly identical!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are also some contracts related to governance and operations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x245cc372c84b3645bf0ffe6538620b04a217988b#code&quot;&gt;DAO&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;Proxied to &lt;a href=&quot;https://etherscan.io/address/0x34cfac646f301356faa8b21e94227e3583fe3f5f#code&quot;&gt;Gnosis Safe&lt;/a&gt; (&lt;a href=&quot;https://github.com/gnosis/safe-contracts/blob/v1.1.1/contracts/GnosisSafe.sol&quot;&gt;github source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.olympusdao.finance/main/contracts/dao&quot;&gt;List of signers&lt;/a&gt; (4 of 7)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x0cf30dc0d48604a301df8010cdc028c055336b2e#code&quot;&gt;Policy&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;Also proxied to &lt;a href=&quot;https://etherscan.io/address/0x34cfac646f301356faa8b21e94227e3583fe3f5f#code&quot;&gt;Gnosis Safe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.olympusdao.finance/main/contracts/policy&quot;&gt;List of signers&lt;/a&gt; (3 of 5)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;v2-contracts&quot;&gt;v2 Contracts&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x1c21f8ea7e39e2ba00bc12d2968d63f4acb38b7a#code&quot;&gt;OlympusAuthority.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/OlympusAuthority.sol&quot;&gt;source&lt;/a&gt;)&lt;ul&gt;
&lt;li&gt;This replaces the &amp;quot;Policy&amp;quot; from v1.1 and also owns the ERC-20 contract.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x64aa3364f17a4d01c6f1751fd97c2bd3d7e7f1d5#code&quot;&gt;OlympusERC20.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/OlympusERC20.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x04906695D6D12CF5459975d7C3C03356E4Ccd460#code&quot;&gt;sOlympusERC20.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/sOlympusERC20.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xb63cac384247597756545b500253ff8e607a8020#code&quot;&gt;Staking.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/Staking.sol&quot;&gt;source&lt;/a&gt;)&lt;ul&gt;
&lt;li&gt;v2 does not have separate warmup &amp;amp; helper contracts ‚Äî instead the
functionality is merged in &lt;code&gt;Staking.sol&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0xeeeb97a127a342656191e0313df33d58d06b2e05#code&quot;&gt;StakingDistributor.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/StakingDistributor.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x9a315bdf513367c0377fb36545857d12e85813ef#code&quot;&gt;Treasury.sol&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/Treasury.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x9025046c6fb25fb39e720d97a8fd881ed69a1ef6#code&quot;&gt;BondingDepository.sol&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x0ab87046fbb341d058f17cbc4c1133f25a20a52f#code&quot;&gt;gOHM&lt;/a&gt; (&lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/blob/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9/contracts/governance/gOHM.sol&quot;&gt;source&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;The DAO contract is the same as before.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A big difference in v2 is that there is a single deployed bonding contract,
which handles all tokens (unlike v1.1, which has one deployed contract per
token).&lt;/p&gt;
&lt;p&gt;v2 has also other contracts, but I haven&amp;#39;t reviewed those, so I&amp;#39;ll limit myself
to establish this mapping will the old contracts. Also note that the &lt;a href=&quot;https://github.com/OlympusDAO/olympus-contracts/tree/542c215c57e213ed82a98ffc052ebaa9ee4f1ce9&quot;&gt;v2
codebase&lt;/a&gt; splits interface and imports away from the main contract
to be deployed, unlike 1.1.&lt;/p&gt;
&lt;h3 id=&quot;upgrade-paths&quot;&gt;Upgrade Paths&lt;/h3&gt;
&lt;p&gt;Olympus uses very few proxy (only for the DAO and the v1.1 policy contract). Yet
they were able to deploy many new versions of contracts.&lt;/p&gt;
&lt;p&gt;These upgrade paths are not explicit in the code (which is a shame), but I do
believe some thoughts went into them.&lt;/p&gt;
&lt;p&gt;Often, upgrades entails co-existence. For instance, the v1.1 staking contract
still &amp;quot;works&amp;quot; if you staked your OHM in it and haven&amp;#39;t migrated to v2. However,
the old contract does not accept new stakers anymore (this can be achieved by
setting some configurable values (e.g. addresses) so that new attempts to stake
on the old contract revert).&lt;/p&gt;
&lt;p&gt;In the future, it&amp;#39;s possible that Olympus might be able to &amp;quot;disable&amp;quot; some old
contracts. For instance, it could suspend rebases in the old staking contract
(by modifying the address of the distributor), forcing people to migrate if they
want to keep earning yield.&lt;/p&gt;
&lt;p&gt;That being said, the lack of proxys does not mean that the protocol is
&amp;quot;decentralized&amp;quot;. In fact, the policy/authority multisig has the ability to
change a lot of variables, including contract addresses!&lt;/p&gt;
&lt;h2 id=&quot;basics--staking&quot;&gt;Basics &amp;amp; Staking&lt;/h2&gt;
&lt;p&gt;Let&amp;#39;s begin our dive into the contracts! First, let&amp;#39;s get the easy stuff out of
the way:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The &lt;a href=&quot;https://etherscan.io/address/0x383518188c0c6d7730d91b2c03a03c837814a899#code&quot;&gt;OlympusERC20.sol&lt;/a&gt; contract is a straightforward &lt;a href=&quot;https://eips.ethereum.org/EIPS/eip-20&quot;&gt;ERC-20&lt;/a&gt; token
contract implementation. It is owned by an &lt;a href=&quot;https://etherscan.io/address/0x763a641383007870ae96067818f1649e5586f6de&quot;&gt;EOA&lt;/a&gt; (Externally Owned
Account). This is not very secure, but is fixed in Olympus v2, where the owner
is remplaced by the Olympus authority contract, which is in turn controlled by
a &lt;a href=&quot;https://help.gnosis-safe.io/en/articles/3876456-what-is-gnosis-safe&quot;&gt;multisig Gnosis safe&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Minting privileges are given to the &amp;quot;vault&amp;quot; which is the
&lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;Treasury.sol&lt;/a&gt; contract.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;a href=&quot;https://etherscan.io/address/0x245cc372c84b3645bf0ffe6538620b04a217988b#code&quot;&gt;DAO&lt;/a&gt; contract is simply a &lt;a href=&quot;https://help.gnosis-safe.io/en/articles/3876456-what-is-gnosis-safe&quot;&gt;Gnosis safe&lt;/a&gt;, which lets a majority of
&lt;a href=&quot;https://docs.olympusdao.finance/main/contracts/dao&quot;&gt;signers&lt;/a&gt; do whatever with the funds held by the DAO contract.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;intro-to-rebases--sohm-balances&quot;&gt;Intro to Rebases &amp;amp; sOHM Balances&lt;/h3&gt;
&lt;p&gt;The &lt;a href=&quot;https://etherscan.io/address/0x04f2694c8fcee23e8fd0dfea1d4f5bb8c352111f#code&quot;&gt;sOlympusERC20.sol&lt;/a&gt; contract is also an &lt;a href=&quot;https://eips.ethereum.org/EIPS/eip-20&quot;&gt;ERC-20&lt;/a&gt; implementation, this
time for the staked OHM token (&lt;em&gt;sOHM&lt;/em&gt;, which you receive in exchange for your
OHMs after you stake). However, the contract also implements part of the
&amp;quot;rebase&amp;quot; logic.&lt;/p&gt;
&lt;p&gt;In Olympus parlance, a &lt;em&gt;rebase&lt;/em&gt; is the thrice-daily inflation event. It used to
be set at 0.35% for a long time, but is now &lt;a href=&quot;https://dune.xyz/shadow/Olympus-Policy&quot;&gt;sitting at 0.2%&lt;/a&gt;,
subject to changes by the Olympus policy team. During each rebase, the newly
minted tokens are auto-staked and distributed to the stakers proportionally to
their existing stake.&lt;/p&gt;
&lt;p&gt;Because of the frequent rebases, sOHM balances are constantly in flux. They
change automatically, without users needed to submit transactions to claim.&lt;/p&gt;
&lt;p&gt;The way this is implemented is rather ingenious. The contract does not maintain
sOHM balances: this would be too expensive, as every rebase would need to touch
every single balance. Instead it maintains a balance of &amp;quot;gons&amp;quot; (I don&amp;#39;t know
where the term comes from). Whenever a rebase occur, the gon balance does not
change ‚Äî only the total pot of OHM owned by the &lt;a href=&quot;https://etherscan.io/address/0xFd31c7d00Ca47653c6Ce64Af53c1571f9C36566a#code&quot;&gt;staking contract&lt;/a&gt; is
increased. A user&amp;#39;s sOHM balance is the fraction of the OHM pot equal to its gon
balance divided by the total gon supply. This is also the amount of OHM the user
would receive if unstaking his whole sOHM balance (one sOHM always corresponds
1-1 to one OHM in the staking contract).&lt;/p&gt;
&lt;p&gt;The sOHM contract itself defines only part of that logic. It has a
&lt;code&gt;rebase(uint256 profit_, uint epoch_)&lt;/code&gt; function, callable only by the staking
contract. The &lt;code&gt;profit_&lt;/code&gt; here is the amount of sOHM that is to be distributed in
the rebase. The logic in that function ensures that the sum of the balances of
all stakers is increased by this amount.&lt;/p&gt;
&lt;p&gt;Now we must tackle a peculiarity in the contract code I cannot quite explain.
Instead of letting the staking contract mint the sOHM whenever it receives OHM,
the sOHM contract allocates &lt;code&gt;5*10^15&lt;/code&gt; (or 5 million billion) sOHM to the staking
contract. Whenever the staking contract receives OHM, it sends a corresponding
amount of sOHM from his own balance to the staker. I assume there must be a
reason for this, but it is not obvious. The contract also calls sOHM
&amp;quot;fragments&amp;quot;, though I&amp;#39;m not quite sure why. (It could be to better differentiate
them from gons, and avoid using ambiguous terms like &lt;em&gt;amount&lt;/em&gt;, but the contract
does that sometimes anyway.)&lt;/p&gt;
&lt;p&gt;EDIT: &lt;a href=&quot;https://twitter.com/_nd_go&quot;&gt;iND1G0&lt;/a&gt; points out the terminology is
inherited from &lt;a href=&quot;https://www.ampleforth.org/&quot;&gt;Ampleforth&lt;/a&gt;, an algorithm
stablecoin. This explanation from the home page is pretty eloquent:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When Price &amp;gt; $1, wallet balances Increase proportionally
When Price &amp;lt; $1, wallet balances Decrease proportionally&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This sOHM allocation to the staking contract also means that the sOHM contract
must distinguish between the total supply and the &lt;em&gt;circulating supply&lt;/em&gt; (which
excludes the staking contract&amp;#39;s balance), and that the &lt;code&gt;rebase&lt;/code&gt; function must
inflate the total supply by more than the &lt;code&gt;profit_&lt;/code&gt; parameter, in order for the
circulating supply to be inflated by &lt;code&gt;profit_&lt;/code&gt; and be effectively accrued to the
stakers. The staking contract balance inflation is irrelevant (since it&amp;#39;s only
ever exchange for OHM that was staked, or to reward lockers ‚Äî see later).&lt;/p&gt;
&lt;p&gt;An interesting thing to note is that the staking contract&amp;#39;s sOHM balance is not
backed by underlying OHM. This is fine because (a) when staking, users exchange
OHM for sOHM 1-1 with the staking contract and (b) when rebasing, the
&lt;a href=&quot;https://etherscan.io/address/0xC58E923bf8A00E4361FE3f4275226a543D7D3ce6#code&quot;&gt;distributor contract&lt;/a&gt; mints OHM for the staking contract 1-1 with
the reward (see later).&lt;/p&gt;
&lt;h3 id=&quot;staking--unstaking&quot;&gt;Staking &amp;amp; Unstaking&lt;/h3&gt;
&lt;p&gt;The abstract idea of staking is pretty easy: you send X OHM to the &lt;a href=&quot;https://etherscan.io/address/0xFd31c7d00Ca47653c6Ce64Af53c1571f9C36566a#code&quot;&gt;staking
contract&lt;/a&gt;, and the staking contract sends you X sOHM in return.
Unstaking is the same, but in reverse.&lt;/p&gt;
&lt;p&gt;In pratice, it&amp;#39;s a bit more involved because the contracts introduce a notion of
&lt;em&gt;warmup&lt;/em&gt;, which is not currently used.&lt;/p&gt;
&lt;p&gt;To stake, you call the &lt;code&gt;stake(uint _amount, address _recipient)&lt;/code&gt; function, which
receives your OHM, and sends sOHM to the &lt;a href=&quot;https://etherscan.io/address/0x2882a5cd82ac49e06620382660f5ed932607c5f1#code&quot;&gt;StakingWarmup.sol&lt;/a&gt; contract on
your behalf. Then, after the warmup period (&lt;code&gt;warmupPeriod&lt;/code&gt;, currently 0), you
can call &lt;code&gt;claim (address _recipient)&lt;/code&gt; to transfer the sOHM locked in the warmup
contract to your own balance.&lt;/p&gt;
&lt;p&gt;Because the warmup period is currently 0, you could do both calls in a single
transaction. For this purpose, Olympus has deployed the
&lt;a href=&quot;https://etherscan.io/address/0xC8C436271f9A6F10a5B80c8b8eD7D0E8f37a612d#code&quot;&gt;StakingHelper.sol&lt;/a&gt; contract whose &lt;code&gt;stake(uint _amount)&lt;/code&gt; function
does exactly this. Additionally, the recipient is implicitly the sender.&lt;/p&gt;
&lt;p&gt;You can cancel the warmup period and reclaim your OHM with the &lt;code&gt;forfeit()&lt;/code&gt;
function, and you can prevent other people from staking OHM for you using
&lt;code&gt;toggleDepositLock()&lt;/code&gt; (my best guess is that this is just for extra protection,
so that a contract that you&amp;#39;ve authorized to handle your OHM can&amp;#39;t unstake your
sOHM).&lt;/p&gt;
&lt;h2 id=&quot;rebases-in-depth&quot;&gt;Rebases in Depth&lt;/h2&gt;
&lt;p&gt;Rebases are initiated by calling the &lt;code&gt;rebase()&lt;/code&gt; function of the &lt;a href=&quot;https://etherscan.io/address/0xFd31c7d00Ca47653c6Ce64Af53c1571f9C36566a#code&quot;&gt;staking
contract&lt;/a&gt;. Anybody can call the function, as long as a rebase is due.
The function is also automatically called when someone stakes some OHM!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rebase()&lt;/code&gt; does four things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Check if a rebase is due via the &lt;em&gt;current epoch&lt;/em&gt; (see below), otherwise
return.&lt;/li&gt;
&lt;li&gt;Call &lt;code&gt;sOHM.rebase(uint256 profit_, uint epoch_)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Call &lt;code&gt;distributor.distribute()&lt;/code&gt; (if &lt;code&gt;distributor&lt;/code&gt; != 0)&lt;/li&gt;
&lt;li&gt;Update the current epoch.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The &lt;em&gt;current epoch&lt;/em&gt;, held in the &lt;code&gt;epoch&lt;/code&gt; variable tracks the length of the
epoch, its number, its deadline &lt;code&gt;endBlock&lt;/code&gt; (indicating when &lt;code&gt;rebase()&lt;/code&gt; can be
called), and &lt;code&gt;distribute&lt;/code&gt; (the amount of sOHM to be distributed during the
rebase).&lt;/p&gt;
&lt;p&gt;In the first step, we simply check &lt;code&gt;epoch.endBlock &amp;lt;= block.number&lt;/code&gt;. If that&amp;#39;s
alright, we call &lt;code&gt;sOHM.rebase(epoch.distribute, epoch.number)&lt;/code&gt;, which works as
described above.&lt;/p&gt;
&lt;p&gt;Then we (possibly) call &lt;code&gt;distribute()&lt;/code&gt; on the &lt;a href=&quot;https://etherscan.io/address/0xC58E923bf8A00E4361FE3f4275226a543D7D3ce6#code&quot;&gt;distributor
contract&lt;/a&gt;. Here is how the documentation misleadingly describes it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The distributor contract receives minted OHM from the treasury in order to
drip-feed rewards to stakers. The reward rate target as of time of writing is
set to 3500, which translates to 0.35% of total supply, since the reward rate
is defined in tens of thousands. Note that the reward rate determines the
rebase rate and that the rebase rate determines the APY. Below are listed
distributor contracts by version, where the latest version represents the
currently active contract.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This makes it sound like the distributor is the one that gives out rebasing
reward. As we&amp;#39;ve seen before, this would be too expensive, and it&amp;#39;s actually
done by the sOHM contract.&lt;/p&gt;
&lt;p&gt;In reality, the role of the distributor is to send OHM to the staking contract
in a way that is commensurate with the rebase amount (&lt;code&gt;profit_&lt;/code&gt; from above).
However this mechanism is fully generic and does not encode a direct dependency
on the staking contract. Let&amp;#39;s see how it works briefly.&lt;/p&gt;
&lt;p&gt;Skipping over the fine details, what &lt;code&gt;distribute()&lt;/code&gt; does is distribute OHM
rewards (minted from the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;Treasury contract&lt;/a&gt; via its
&lt;code&gt;mintRewards(address _recipient, uint _amount)&lt;/code&gt; function) to &amp;quot;recipients&amp;quot; which
are added/removed through the &lt;code&gt;addRecipient&lt;/code&gt; and &lt;code&gt;removeRecipient&lt;/code&gt; functions.
These functions are only callable by the &lt;a href=&quot;https://etherscan.io/address/0x0cf30dc0d48604a301df8010cdc028c055336b2e#code&quot;&gt;policy&lt;/a&gt; multisig (which is the current
value of &lt;code&gt;_policy&lt;/code&gt; in the distributor contract). &lt;code&gt;addRecipient&lt;/code&gt; also takes an
individualized reward rate for every recipient.&lt;/p&gt;
&lt;p&gt;If you query the &lt;a href=&quot;https://etherscan.io/address/0xeeeb97a127a342656191e0313df33d58d06b2e05/advanced#readContract&quot;&gt;latest version of the distributor contract on
Etherscan&lt;/a&gt;, you&amp;#39;ll see that the (latest version of the) staking
contract is currently the only recipient.&lt;/p&gt;
&lt;p&gt;An important detail about &lt;code&gt;mintRewards&lt;/code&gt; is that it will refuse to mint OHM if
the risk-free USD value of the reserves is inferior to the OHM supply
(denominated in OHM), effectively setting a lower bound price of 1$ on OHM,
fully backed by the treasury. Fun fact: &lt;code&gt;mintRewards&lt;/code&gt; reverts in that case,
which means any attempt to trigger further rebases or to stake more OHM will
revert too. (This could be sidestepped by removing the staking contract as
distribution recipient, but it would be useless to stake in the absence of
rebases anyhow.)&lt;/p&gt;
&lt;p&gt;Is the staking &lt;code&gt;profit_&lt;/code&gt; connected in any way with the treasury&amp;#39;s reward?
Actually yes. This is done during step 4 of the rebse, when updating the current
epoch.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;distribute&lt;/code&gt; field of the epoch is set to the OHM balance of the staking
contract minus the circulating supply of sOHM (remember the circulating excludes
the staking contract&amp;#39;s own sOHM balance). This ensures that we can only
distribute staking rewards if there is more OHM in the staking contract than
owned by users, guaranteeing that every sOHM can be redeemed for an OHM.&lt;/p&gt;
&lt;p&gt;As a consequence of calling &lt;code&gt;distribute()&lt;/code&gt; earlier, this OHM balance of the
staking contract increased, &lt;code&gt;distribute&lt;/code&gt; will be set to the the OHM reward from
the distributor, and will be distributed as sOHM during the next epoch.&lt;/p&gt;
&lt;p&gt;The distributor contract also has logic handling what it calls &amp;quot;adjustments&amp;quot;
which are a way to smooth a reward rate transition from the current rate to a
target rate, with the reward rate being updated incrementally during each epoch
(when &lt;code&gt;distribute()&lt;/code&gt; is called) until the target rate is reached.&lt;/p&gt;
&lt;h3 id=&quot;locker&quot;&gt;Locker&lt;/h3&gt;
&lt;p&gt;A little mystery lives in the v2 staking contract (the one from Olympus v1.1
that we are considering here): the notion of &amp;quot;locker&amp;quot;.&lt;/p&gt;
&lt;p&gt;The contract has a function &lt;code&gt;giveLockBonus(uint _amount)&lt;/code&gt; which transfers a sOHM
&amp;quot;bonus&amp;quot; to a &amp;quot;locked staking contract&amp;quot; (the &lt;code&gt;locker&lt;/code&gt; contract variable). This
function is only callable by the locker, which can also ostensibly return the
bonus via &lt;code&gt;returnLockBonus(uint _amount)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The locker does not appear in either the v1 or v3 contract, and is now set to
the zero address in the v2 contract. My best guess is that it is a crutch used
to upgrade the Olympus deployment, though I&amp;#39;m not sure how and why.&lt;/p&gt;
&lt;h3 id=&quot;sohm-index&quot;&gt;sOHM Index&lt;/h3&gt;
&lt;p&gt;If you go to the &lt;a href=&quot;https://app.olympusdao.finance&quot;&gt;Olympus DAO App&lt;/a&gt;, you can see it features the &amp;quot;current
index&amp;quot; (74 at the time of writing), with the description:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The current index tracks the amount of sOHM accumulated since the beginning of
staking. Basically, how much sOHM one would have if they staked and held a
single OHM from day 1.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This notion also appears in the sOHM contract. The index is set once (via
&lt;code&gt;setIndex(uint _INDEX)&lt;/code&gt;), to an initial sOHM amount, which is converted to a gon
balance and stored internaly as &lt;code&gt;INDEX&lt;/code&gt;. (Remember, gon balances do not change
when rebasing and are used to track fractional ownership of all the sOHM.)&lt;/p&gt;
&lt;p&gt;Calling &lt;code&gt;index()&lt;/code&gt; returns the amount of sOHM now controlled by this initial sOHM
amount, if it was staked at contract inception.&lt;/p&gt;
&lt;p&gt;During the first sOHM contract deployment, the initial &lt;code&gt;INDEX&lt;/code&gt; was the gon value
for 1 sOHM. Each time the sOHM contract is upgraded, the value returned by
&lt;code&gt;index()&lt;/code&gt; needs to carried over as the new &lt;code&gt;INDEX&lt;/code&gt; value in the new contract.&lt;/p&gt;
&lt;h2 id=&quot;bonding&quot;&gt;Bonding&lt;/h2&gt;
&lt;p&gt;The goal of bonding is to sell OHM at a small discount (at least, usually) in
the form of bonds that vests linearly over a small period of time (currently 5
days).&lt;/p&gt;
&lt;p&gt;&amp;quot;Linear vesting&amp;quot; means that after one day you can already withdraw 1/5 of the
OHM, etc (at the time resolution of blocks ~= 13s).&lt;/p&gt;
&lt;p&gt;The bond purchaser makes a small profit, but takes on price risk. More on the
purpose of bonding in the economic analysis part.&lt;/p&gt;
&lt;p&gt;In &amp;quot;bonds v2&amp;quot;, there is no longer linear vesting. Instead the purchased OHM is
staked and can be claimed at the end of the period. This increases risk for bond
holder who can&amp;#39;t dump at least part of their OHM before expiry, but solves the
problem that the discount rate is actually misleading because the OHM supply
inflates during the vesting period (by about 3% at the current rebase reward
rate).&lt;/p&gt;
&lt;p&gt;Bonds are sold for various assets (called &lt;code&gt;principle&lt;/code&gt; or sometimes &lt;code&gt;reserve&lt;/code&gt; in
the contracts), which are either stablecoin or OHM-stablecoin LP tokens. There
is one contract for each asset, instantiated from the &lt;code&gt;BondDepository.sol&lt;/code&gt; file.
For instance:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x575409F8d77c12B05feD8B455815f0e54797381c#code&quot;&gt;DAI Bond Contract&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://etherscan.io/address/0x956c43998316b6a2F21f89a1539f73fB5B78c151#code&quot;&gt;OHM/DAI LP Bond Contract&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;v2 only has a single contract to handle all bonds.&lt;/p&gt;
&lt;p&gt;We&amp;#39;ll look at how bond prices are determined, starting with stablecoins, then
moving on the more complex pricing of LP tokens, then looking at what the
bonding process actually does (hint: more inflation!).&lt;/p&gt;
&lt;p&gt;For a given bonding contract, the bond price is computed by the view
&lt;code&gt;bondPrice()&lt;/code&gt; method. There is also the &lt;code&gt;_bondPrice()&lt;/code&gt; method, which is the one
actually called during bond purchases. The difference is that the &lt;code&gt;_bondPrice()&lt;/code&gt;
can modify the minimum bond price, as we&amp;#39;ll see.&lt;/p&gt;
&lt;h3 id=&quot;stablecoin-bond-pricing&quot;&gt;Stablecoin Bond Pricing&lt;/h3&gt;
&lt;p&gt;First of all, bonds are fractional, i.e. you get a claim on OHM proportional to
the value of the tokens you use to purchase bonds, without unit limitation.&lt;/p&gt;
&lt;p&gt;This means that &amp;quot;one bond&amp;quot; maps to 1 OHM. However, it can also appear that &amp;quot;one
bond&amp;quot; maps to 100 OHM because bonds are represented with 2 extra digits of
precision: the &lt;code&gt;payoutFor(uint _value)&lt;/code&gt; function of the depository contract
divides the value by the bond price, obtaining a number with 36 digits of
precision, but dividing only by 10^16, hence 100 times more than the expected 18
digits precision. The reason for the extra precision is that the bond price is
expressed in risk-free USD with 2 digits precision (though it&amp;#39;s not clear why
that particular choice was made).&lt;/p&gt;
&lt;p&gt;I must say that dealing with significant digits was by FAR the most tricky and
painful part of reading the contracts. It almost completly threw me for a loop
multiple times, and the devs did an horrendous job at documenting the
assumptions. In fact, I even found what I must assume is a mistake in one of the
comments.&lt;/p&gt;
&lt;p&gt;The formula to determine the bond price (with two digits precision, so the
obtained number will be 100x the price) is &lt;code&gt;bondPrice = min(BCV * debtRatio + 100, terms.minimumPrice)&lt;/code&gt;, where:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;BCV&lt;/code&gt; is the &amp;quot;bond control variable&amp;quot; (&lt;code&gt;terms.controlVariable&lt;/code&gt; in the code).
This value is tweaked for every principle by the Olympus DAO policy team, and
can change over time.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;debtRatio&lt;/code&gt; is the ratio (in percent) of the total bond debt (the OHM to be
paid out for bonds still have to vest) over the total OHM supply. It&amp;#39;s a bit
weird however, because it&amp;#39;s actually a ratio between the &amp;quot;risk-free&amp;quot; value of
the debt in USD (we&amp;#39;ll explain this in the next section) and the supply in
OHM! A consequence of this is that the debt ratio increases faster when the
OHM price is high.&lt;/p&gt;
&lt;p&gt;The debt ratio can be obtained by calling &lt;code&gt;debtRatio()&lt;/code&gt; which returns the
ratio with 9 significant digits of precision (so 1B = 100%). This debt ratio
is different for each bond contract (i.e. for each token).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;terms.minimumPrice&lt;/code&gt; is a minimum price for the bonds. This is useful as
otherwise the first bond sales would be done at a very steep discount, as
&lt;code&gt;debtRatio&lt;/code&gt; is effectively 0. The minimum price is &lt;strong&gt;only&lt;/strong&gt; intended for this
ramp-up: the first time the price exceeds the minimum price in &lt;code&gt;_bondPrice&lt;/code&gt;,
&lt;code&gt;terms.minimumPrice&lt;/code&gt; is set to 0.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As the debt ratio increases, so does the bond price, and vice-versa. This
automatically throttles the rate of bond emission, and incentivizes bond
purchase when few bonds are being sold.&lt;/p&gt;
&lt;p&gt;As a side-note, the Olympus DAO glossary defines BCV as follows:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Bond Control Variable, is the scaling factor at which bond prices change. A
higher BCV means a lower discount for bonders and higher inflation by the
protocol. A lower BCV means a higher discount for bonders and lower inflation
by the protocol.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I find this statement frankly puzzling, since you would expect that when the
discount is higher, more bonds are sold, and so inflation is higher. I think the
explanation here is that &amp;quot;inflation&amp;quot; doesn&amp;#39;t refer to the increase in supply,
but to the loss of value: when more bonds are sold, each bond sale tends to
increase the backing per OHM, which means that OHM will decrease in value more
slowly. More on this in the economic analysis part.&lt;/p&gt;
&lt;h3 id=&quot;liquidity-token-bond-pricing&quot;&gt;Liquidity Token Bond Pricing&lt;/h3&gt;
&lt;p&gt;The formula for determining the bond price when purchasing using liquidity
tokens (with two significant digits) is the same as before: &lt;code&gt;bondPrice = min(BCV * debtRatio + 100, terms.minimumPrice)&lt;/code&gt; (see previous sections for
important details). &lt;strong&gt;This expresses an amount of USD, not an amount of
liquidity tokens.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;But not so fast! When purchasing bonds using LP tokens, Olympus first converts
bonds to their risk-free value (RFV) and then only uses this RFV to determine
the number of bonds purchased.&lt;/p&gt;
&lt;p&gt;The RFV assumes a &amp;quot;worst-case scenario&amp;quot; where 1 OHM is worth 1$. This is a
worst-case scenario because the &lt;code&gt;mintRewards&lt;/code&gt; function of the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;treasury
contract&lt;/a&gt; ensures a minimum backing per OHM of 1$.&lt;/p&gt;
&lt;p&gt;(This computation is slightly sketchy because at 1$ it means OHM is partly
backed LP tokens whose value is made up in half of OHM valued at 1$. Close
enough.)&lt;/p&gt;
&lt;p&gt;The RFV is computed by the &lt;code&gt;valueOf(address _token, uint _amount )&lt;/code&gt; method of
the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;treasury contract&lt;/a&gt;, both for stablecoins and LP token. For
stablecoins the RFV value is trivially computed as the amount of stables. For LP
tokens, the function defers the computation to the &lt;code&gt;valuation(address _pair, uint amount_)&lt;/code&gt; function of an instance of the &lt;code&gt;StandardBondingCalculator.sol&lt;/code&gt;
contract (e.g. &lt;a href=&quot;https://etherscan.io/address/0xcaaa6a2d4b26067a391e7b7d65c16bb2d5fa571a#code&quot;&gt;the instance used by the OHM-DAI contract&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;The formula to compute the RFV of the whole liquidity pool is &lt;code&gt;2 * sqrt(k)&lt;/code&gt;,
where &lt;code&gt;k = ohmInPool * stableInPool&lt;/code&gt; (this is the classical &lt;code&gt;x * y = k&lt;/code&gt;
&lt;a href=&quot;https://docs.uniswap.org/protocol/V2/concepts/protocol-overview/how-uniswap-works&quot;&gt;equation of Uniswap v2 pools&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This makes sense: at 1$ = 1 OHM, &lt;code&gt;ohmInPool == stableInPool == sqrt(k)&lt;/code&gt;, hence
&lt;code&gt;ohmInPool + stableInPool == 2 * sqrt(k)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To compute the RFV of any amount of LP tokens, you simply multiply the liquidity
pool RFV by the fraction of the pool controlled by the tokens.&lt;/p&gt;
&lt;p&gt;The bonding calculator also has a &lt;code&gt;markdown&lt;/code&gt; function which indicates how
discounted the RFV is compared to the actual price. The actual price for the
whole pool is the amounts of stable times 2 (since by definition the values of
one side of the pool equals the value of the other side). Then to get the
markdown, you divide this by the RFV value of the whole pool.&lt;/p&gt;
&lt;h3 id=&quot;bonding-in-depth&quot;&gt;Bonding in Depth&lt;/h3&gt;
&lt;p&gt;To purchase a bond, you call the &lt;code&gt;deposit(uint _amount, uint _maxPrice, address _depositor)&lt;/code&gt; method of the &lt;code&gt;BondDepository.sol&lt;/code&gt; instance of your choice (e.g.
[the DAI bond contract][dai-bound]).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;_amount&lt;/code&gt; is the amount of tokens (stable or LP) you&amp;#39;re sending for your
purchase&lt;/li&gt;
&lt;li&gt;&lt;code&gt;maxPrice&lt;/code&gt; is the maximum &lt;strong&gt;USD&lt;/strong&gt; price (using the decimal precision of your
stablecoin (*), usually 18) you&amp;#39;re willing to pay per bond. This is intended to
protect against &lt;a href=&quot;https://www.investopedia.com/terms/s/slippage.asp&quot;&gt;slippage&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;_depositor&lt;/code&gt; is the address of the depositor (this is useful in case a
contract is calling this method on your behalf).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(*) If purchasing a bond with LP tokens, this will be the precision of
stablecoin in the pair.&lt;/p&gt;
&lt;p&gt;Here are the various steps taken by the function:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Verify that the max &amp;quot;debt&amp;quot; is not exceeded, as set by &lt;code&gt;terms.maxDebt&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Calculate &lt;code&gt;nativePrice&lt;/code&gt; ‚Äî the bond price in &amp;quot;risk-free USD&amp;quot;, with two digits
of precision.&lt;/li&gt;
&lt;li&gt;Calculate &lt;code&gt;priceInUSD&lt;/code&gt; ‚Äî the bond price in &amp;quot;market-price USD&amp;quot;, using the
stablecoin&amp;#39;s decimals.&lt;/li&gt;
&lt;li&gt;Calculate the payout (amount of OHM the bonds can be redeemed for) and the
DAO fee.&lt;/li&gt;
&lt;li&gt;Call the &lt;code&gt;deposit(uint _amount, address _token, uint _profit)&lt;/code&gt; function of
the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;treasury contract&lt;/a&gt; to mint the OHM for the payout and for the
DAO fee.&lt;/li&gt;
&lt;li&gt;Pay the DAO fee, and perform book-keeping: update bond info, total debt and
perform adjustments.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Let&amp;#39;s go over some  these things in more details.&lt;/p&gt;
&lt;h4 id=&quot;1-checking-against-the-maximum-debt&quot;&gt;1. Checking against the maximum debt&lt;/h4&gt;
&lt;p&gt;The variable &lt;code&gt;terms.maxDebt&lt;/code&gt; indicates the maximum allowable debt for the
contract. Intuitively, the debt is the amount of granted OHM yet to be vested.
However, &lt;code&gt;terms.maxDebt&lt;/code&gt; is denominated in risk-free USD (&amp;quot;RFV USD&amp;quot;) instead.&lt;/p&gt;
&lt;p&gt;First the total debt held in the variable &lt;code&gt;totalDebt&lt;/code&gt; is decayed by calling
&lt;code&gt;debtDecay()&lt;/code&gt; removing the value of the tokens that have vested since the last
time the debt was decayed.&lt;/p&gt;
&lt;p&gt;Decaying it is done on a proportional basis: for instance if 50% of the vesting
period (so 2.5 days) have passed since the last decay, the &lt;code&gt;totalDebt&lt;/code&gt; is split
in half.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;totalDebt&lt;/code&gt; is also denominated in RFV USD. As we&amp;#39;ve already mentionned, this
makes the &lt;code&gt;debtRatio&lt;/code&gt; a ratio between a value in RFV USD and OHM, which is
peculiar, but has the effect of increasing the debt ratio (and hence the bond
price) faster when the OHM price is high.&lt;/p&gt;
&lt;h4 id=&quot;2-calculate-the-bond-price&quot;&gt;2. Calculate the bond price&lt;/h4&gt;
&lt;p&gt;As explained earlier, the bond price is computed by using the formula
&lt;code&gt;rfvBondPrice = BCV * debtRatio + 100&lt;/code&gt;, where &lt;code&gt;debtRatio&lt;/code&gt; is a whole integer
representing a percentage (so for 5%, we&amp;#39;d multiply BCV by 5).&lt;/p&gt;
&lt;p&gt;The bond price, held in the variable &lt;code&gt;nativePrice&lt;/code&gt; inside the function, is
denominated in USD, but the RFV of the tokens will be used to &amp;quot;pay&amp;quot; for this
price. Hence I will say it is denominated in &amp;quot;risk-free USD&amp;quot; or &amp;quot;RFV USD&amp;quot;.&lt;/p&gt;
&lt;p&gt;I will refer to this value as &lt;code&gt;rfvBondPrice&lt;/code&gt; to be clearer.&lt;/p&gt;
&lt;p&gt;As we have said earlier, &lt;code&gt;rfvBondPrice&lt;/code&gt; is a value with two significant digit
(instead of the usual 18).&lt;/p&gt;
&lt;h4 id=&quot;3-calculate-the-market-value-usd-bond-price&quot;&gt;3. Calculate the market-value USD bond price&lt;/h4&gt;
&lt;p&gt;Since &lt;code&gt;rfvBondPrice&lt;/code&gt; is a risk-free amount, the function also computes the
market price of a bond. This will later (see section on boo-keeping) be recorded
in the bond information.&lt;/p&gt;
&lt;p&gt;Since bond sales affect bond prices, this value ‚Äî as well as the RFV bond price
‚Äî will be recomputed later and included in an event called &lt;code&gt;BondPriceChanged&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For LP bonds, the value is computed as &lt;code&gt;rfvBondPrice * markdown / 100&lt;/code&gt; (cf.
section on LP token pricing for info on the markdown). Here, unlike in many
other places, I&amp;#39;ve included the &lt;code&gt;/ 100&lt;/code&gt; which adjusts the digits. If you&amp;#39;re
thinking of amounts as real numbers, feel free to ignore it.&lt;/p&gt;
&lt;h4 id=&quot;4-calculate-the-payout-and-dao-fee&quot;&gt;4. Calculate the payout and DAO fee&lt;/h4&gt;
&lt;p&gt;First, the &lt;code&gt;deposit&lt;/code&gt; function (of the bonding depository contract) computes the
payout, the amount of OHM to grant. This is obtained by computing the RFV value
of the amount deposited (using the &lt;code&gt;valueOf&lt;/code&gt; of the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;treasury
contract&lt;/a&gt;) and dividing this by the bond price.&lt;/p&gt;
&lt;p&gt;The DAO receives an OHM-denominated payout equal to a percentage of the payout,
set by &lt;code&gt;terms.fee&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&quot;5-mint-ohm-for-payout-and-dao-fee&quot;&gt;5. Mint OHM for payout and DAO fee&lt;/h4&gt;
&lt;p&gt;Next, the the &lt;code&gt;deposit(uint _amount, address _token, uint _profit)&lt;/code&gt; function of
the &lt;a href=&quot;https://etherscan.io/address/0x31F8Cc382c9898b273eff4e0b7626a6987C846E8#code&quot;&gt;treasury contract&lt;/a&gt; is called. This function&amp;#39;s purpose is to mint
OHM for the payout and for the DAO fee.&lt;/p&gt;
&lt;p&gt;The function takes a &lt;code&gt;_profit&lt;/code&gt; parameter, which is completely different from the
rebase &amp;quot;profit&amp;quot; that we talked about before. In this case, the profit is
computed as &lt;code&gt;profit = rfvValue - payout - fee&lt;/code&gt;. The only purpose of this
&lt;code&gt;_profit&lt;/code&gt; is that the treasury &lt;code&gt;deposit&lt;/code&gt; function will subtract it from the RFV
values of the tokens to obtain a &lt;code&gt;_send&lt;/code&gt; value: &lt;code&gt;_send = rfValue - profit = payout + fee&lt;/code&gt;. This determines the amount of OHM minted to the bond depository
contract, to be paid to the DAO and to be granted by the emitted bonds. If you
think it would have been immensely simpler to sent something like &lt;code&gt;_mint = payout + fee&lt;/code&gt;... you would be right. It makes very little sense, given for
instance that &lt;code&gt;rfvValue&lt;/code&gt; is denominated in USD while the payout and the fee are
denominated in OHM.&lt;/p&gt;
&lt;h4 id=&quot;6-pay-the-dao-and-perform-book-keeping&quot;&gt;6. Pay the DAO and perform book-keeping&lt;/h4&gt;
&lt;p&gt;The book-keeping part is important: this is where we actually record that the
user is entitled to redeem the payout!&lt;/p&gt;
&lt;p&gt;We also increase the total debt by the RFV value of the tokens supplied. This is
necessary to check the maximum debt and compute the debt ratio.&lt;/p&gt;
&lt;p&gt;Finally, just like the distributor contract, bond depository contracts have some
&amp;quot;adjustment&amp;quot; logic, used to smooth a transition in the value of the BCV. Unlike
the distributor, which adjusts during each rebase epoch, a depository contract
adjusts during every bond sale, which means changes can be relatively fast if
many bond sales occur in rapid succession.&lt;/p&gt;
&lt;h3 id=&quot;example&quot;&gt;Example&lt;/h3&gt;
&lt;p&gt;To make things hopefully a little bit clearer, let&amp;#39;s work through a bonding
example.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s assume that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OHM is worth 70$ (as it was when I wrote this example)&lt;/li&gt;
&lt;li&gt;the OHM-DAI liquidity pool contains 100 OHM (and therefore
7000 DAI, which we&amp;#39;ll write 7000$ for convenience)&lt;/li&gt;
&lt;li&gt;the ownership of the pool is split accross 100 LP tokens, each of which is
worth &lt;code&gt;0.01 * 2 * 7000 = 140&lt;/code&gt; $&lt;/li&gt;
&lt;li&gt;the current debt ratio for the OHM-DAI bond depository contract is 5%&lt;/li&gt;
&lt;li&gt;the bond control variable (BCV) for the OHM-DAI contract is 207 (as it is at
the time for writing)&lt;/li&gt;
&lt;li&gt;the (thrice-daily) rebase rate is 0.24% (as it was when I wrote this)&lt;/li&gt;
&lt;li&gt;the DAO fee is 1%. This is currently 0% in both v1 and v2 bonds, and it&amp;#39;s
particularly difficult to find historical values (you&amp;#39;d have to run your own
node and re-execute transactions, since value changes are not even logged).&lt;/li&gt;
&lt;li&gt;the RFV backing per OHM is about 26$ (as it was ...)&lt;/li&gt;
&lt;li&gt;the market-value backing per OHM is about 60$ (as it was ...)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Under these condtions, the risk-free value (RFV) of such a DAI-OHM LP token is
&lt;code&gt;0.01 * 2 * sqrt(100 * 7000) ~= 16.73&lt;/code&gt; $.&lt;/p&gt;
&lt;p&gt;If a user uses a single LP token to purchase bonds, he would get back bonds that
would grant &lt;code&gt;(16.73 * 100) / (100 + 5 * 207) == 2.32&lt;/code&gt; OHM. This represents a
&amp;quot;premium&amp;quot; of 0.73 OHM compared to the market price, which is equivalent of an
effective OHM price of &lt;code&gt;140 / 2.32 = 60.34&lt;/code&gt; $, or an effective discount rate of
14% compared to the market price.&lt;/p&gt;
&lt;p&gt;A more realistic discount assessment would also consider that during the vesting
period of 5 days, the OHM supply will inflate by around 3.7% (&lt;code&gt;1.0024^(3*5) ~= 1.037&lt;/code&gt;), so the effective discount is closer to 10%, assuming the buyer redeems
at the end of the vesting period (of course, Ethereum transaction prices makes
the amounts we&amp;#39;re discussing completely unreleastic, but whatever).&lt;/p&gt;
&lt;p&gt;We&amp;#39;ll note that v2 bonds solve this issue by staking the granted amount
immediately, and so there is no loss due to inflation.&lt;/p&gt;
&lt;p&gt;So in this example, 2.343 OHM are emitted (&lt;code&gt;1.01 * 2.32&lt;/code&gt; to account for the DAO
fee), backed by 140$ of market value and 16.73$ of risk-free value (7.14$ per
OHM).&lt;/p&gt;
&lt;p&gt;In this case, the RFV backing per minted OHM (7.14$) is significantly less than
the current RFV backing per OHM (which is 26$). This means that each OHM emitted
in bonding decreases the backing per OHM.&lt;/p&gt;
&lt;p&gt;I&amp;#39;ll discuss this more in the economic analysis part, but this is an inherent
property of LP bond sales. Stablecoin bond sales, on the other hand, tend to
increase the RFV backing per OHM.&lt;/p&gt;
&lt;h2 id=&quot;coda&quot;&gt;Coda&lt;/h2&gt;
&lt;p&gt;That&amp;#39;s it! This ended up much longer than I expected, and also took longer to
write, but I learned a lot doing the research. I hope you enjoyed the deep dive,
and learned something!&lt;/p&gt;
      </description>
      <pubDate>2022-02-14T23:00:00.000Z</pubDate>
      <link>http://norswap.com/olympus</link>
      <guid isPermaLink="true">http://norswap.com/olympus</guid>
    </item>
    <item>
      <title>The Essence of Blockchains</title>
      <description>
&lt;p&gt;What are blockchains for? Why are they useful?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I contend that the essence of blockchain is that they are decentralized trust
engines.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Decentralized trust has a lot of benefits, but the one I&amp;#39;m personally excited
about is that it enables &lt;strong&gt;permissionless innovation&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Below I explain what the hell I mean by &lt;em&gt;decentralized trust&lt;/em&gt; and
&lt;em&gt;permissionless innovation&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;who-do-you-trust&quot;&gt;Who do you trust?&lt;/h2&gt;
&lt;p&gt;Whenever you perform some action online, you&amp;#39;re always implicitly trusting some
entity.&lt;/p&gt;
&lt;p&gt;For instance, if you run a computation on Amazon Web Service (AWS), or even in
Google Sheets, you trust Amazon and Google not to alter the result of the
computation.&lt;/p&gt;
&lt;p&gt;If you host files on Dropbox, you trust Dropbox not to alter their content, and
to not arbitrarily destroy your backup.&lt;/p&gt;
&lt;p&gt;You trust that Google won&amp;#39;t return you completely fabricated search result to
get you to take some specific decision (e.g. a purchase) that is in their
interest. (They certainly influence search results, but they don&amp;#39;t (yet?)
fabricate them.)&lt;/p&gt;
&lt;p&gt;You trust that your bank won&amp;#39;t take your money. You trust that your insurer will
actually compensate you in case of accident.&lt;/p&gt;
&lt;p&gt;You might also trust all of these companies with the privacy of your data.&lt;/p&gt;
&lt;p&gt;Etc, etc...&lt;/p&gt;
&lt;p&gt;You might object that these companies won&amp;#39;t do these shady things. They stand to
lose a lot, including reputation, customers, future revenues, etc! As for banks
and insurances, they are heavily regulated.&lt;/p&gt;
&lt;p&gt;That&amp;#39;s true ‚Äî although I will say these companies have gotten away with a
surprising number of things. But more importantly it means you can only deal
with entities that either (a) have something to lose or (b) comply with draconic
and time-consuming regulations ‚Äî and mostly that means big entrenched companies.
We&amp;#39;ll explore this when we talk about &lt;em&gt;permissionless innovation&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Also consider that companies might be &lt;em&gt;forced&lt;/em&gt; to do something, probably by some
government.&lt;/p&gt;
&lt;h2 id=&quot;decentralized-trust&quot;&gt;&amp;quot;Decentralized&amp;quot; trust?&lt;/h2&gt;
&lt;p&gt;The fundamental proposition of blockchains is the following: &lt;strong&gt;What if you did
not have to trust a single entity, a single company?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In blockchains, there is a network of &lt;em&gt;nodes&lt;/em&gt; (aka &lt;em&gt;verifiers&lt;/em&gt;, &lt;em&gt;validators&lt;/em&gt;,
&lt;em&gt;stakers&lt;/em&gt;, &lt;em&gt;miners&lt;/em&gt;, ...) that verify the operations of the blockchains. As long
as a majority of these nodes are honest (e.g. 50% of them, this changes between
blockchains), you can trust that anything that happens on the blockchain follows
the rules of the blockchain. And dishonesty has dire consequences for validators
‚Äî because of sunk costs, or because of explicit penalties.&lt;/p&gt;
&lt;p&gt;This changes your trust assumption from trusting a single entity to trusting
that a majority of validators are honest.&lt;/p&gt;
&lt;p&gt;The more validators there are, the less collusion is likely. Said otherwise, the
more decentralized the system is, the less trust you need to put in the system.&lt;/p&gt;
&lt;p&gt;It is also of paramount importance that anyone be able to become a validator of
the network. Otherwise, the network is really controlled by the gatekeeper of
the validation rights. This is less easy than it sounds ‚Äî you have to make
validation costly enough, otherwise an attacker could just spin a huge number of
nodes and take over the network ‚Äî a &lt;a href=&quot;https://en.wikipedia.org/wiki/Sybil_attack&quot;&gt;sybil attack&lt;/a&gt;. Preventing sybil attacks is
the main technical breakthrough of blockchain technology. I explain the
solutions (proof-of-work and proof-of-stake) in my article: &lt;a href=&quot;https://norswap.com/blockchain-how&quot;&gt;&lt;strong&gt;Freaking
blockchains: How do they work?&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;applications--trade-offs&quot;&gt;Applications &amp;amp; Trade-Offs&lt;/h2&gt;
&lt;p&gt;Let&amp;#39;s go back to our examples. Am I saying that blockchains will supersede AWS,
Google Sheet, Google Search, Dropbox, banks and insurances?&lt;/p&gt;
&lt;p&gt;Not necessarily.&lt;/p&gt;
&lt;p&gt;In reality, there is a trade-off. Nothing is truly trustless or riskless.
Running most web apps on AWS is really fine, because the risk that Amazon is
going to manipulate your results is close to zero, and the downside if they do
is very low. Even if you&amp;#39;re running with a brand-new competitor, you&amp;#39;re not
risking all that much.&lt;/p&gt;
&lt;p&gt;But for some applications, trust and security are a really big deal. In
particular, where money is concerned. It&amp;#39;s not by accident that finance is
stringently regulated. And similarly, it&amp;#39;s not an accident that most popular
applications of blockchains right now deal with money. It&amp;#39;s doubly important
when you&amp;#39;re dealing with anonymous blockchain developers with no pre-existing
reputation (more on this in the section on permissionless innovation).&lt;/p&gt;
&lt;!--

Since we mentionned Dropbox, I will mention there are a few blockchains
specialized in storage, like [Arweave] and [Filecoin]. These are very useful if
censorship is a concern ([example][hong-kong]).

Privacy-wise, blockchains are not there yet, at least for computation. In most
blockchain, transactions are public! It&#39;s already possible the hide the
transactions using [zero-knowledge proofs][zkp], however the resulting
blockchain state modification is public. you are only &quot;protected&quot; by the
pseudonimity of your blockchain address, but that is a weak kind of protection.
This is a topic of ongoing research.

[Arweave]: https://www.arweave.org/
[Filecoin]: https://filecoin.io/
[hong-kong]: https://www.reuters.com/article/us-hongkong-security-apple-daily-blockch-idCAKCN2E00JP
[zkp]: https://en.wikipedia.org/wiki/Zero-knowledge_proof

--&gt;

&lt;h2 id=&quot;permissionless-innovation&quot;&gt;Permissionless Innovation&lt;/h2&gt;
&lt;p&gt;Finally, we come to what is to me the most exciting consequence of decentralized
trust: &lt;em&gt;permissionless innovation&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;On computation-centric blockchains, like &lt;a href=&quot;https://ethereum.org/en/&quot;&gt;Ethereum&lt;/a&gt;,
the network certifies computation, and the code of the computation is a public
smart contract stored on the blockchain, you can trust the contract to do what
its code says, nothing more and nothing less.&lt;/p&gt;
&lt;p&gt;This means that &lt;em&gt;anybody&lt;/em&gt; can deploy a new smart contract, and other people can
use it as long as they trust the code. The contract author does not need to have
resources, a reputation or even to comply with regulations (1) to deploy his
contract, or for you to trust that the contract will be executed faithfully.&lt;/p&gt;
&lt;p&gt;(1) He &lt;em&gt;has to&lt;/em&gt;, legally speaking, but blockchains being novel, it&amp;#39;s unclear
which rules apply in the first place. Such &lt;a href=&quot;https://en.wikipedia.org/wiki/Fear,_uncertainty,_and_doubt&quot;&gt;FUD&lt;/a&gt; would normally stifle
innovation ‚Äî but not on the blockchain where the barrier to entry is low, and
many developers are anonymous.&lt;/p&gt;
&lt;p&gt;This is super exciting! It has already led to numerous innovations in the
financial realm, such as &lt;a href=&quot;https://www.paradigm.xyz/2021/04/understanding-automated-market-makers-part-1-price-impact/&quot;&gt;automated market makers&lt;/a&gt; (AMM), as well as many
new forms of clever incentivization mechanisms such as &lt;a href=&quot;https://academy.shrimpy.io/post/what-is-liquidity-mining&quot;&gt;liquidity mining&lt;/a&gt;,
&lt;a href=&quot;https://www.okex.com/academy/en/olympusdao-protocol-owned-liquidity-defi-reserve-currency-ohm&quot;&gt;liquidity purchases via bonding&lt;/a&gt;, and more.&lt;/p&gt;
&lt;p&gt;Besides brand new constructions, it also makes opportunities available to
everyone that were previously available only to a few. Option protocols such as
&lt;a href=&quot;https://docs.lyra.finance/&quot;&gt;Lyra&lt;/a&gt; make it possible for everyone to profit from market-making the option
market: a process where the &lt;em&gt;market maker&lt;/em&gt; sells an option, which is hedged by
the underlying, in order to pocket the option premium. (If this is Chinese to
you, see my articles on &lt;a href=&quot;https://norswap.com/options/&quot;&gt;options&lt;/a&gt; and on &lt;a href=&quot;https://norswap.com/gamestop/&quot;&gt;gamma squeezes&lt;/a&gt;.) Previously, this
lucrative and relatively safe opportunity reserved to big investment banks.
On-chain, everyone can add their money to a pool and participate!&lt;/p&gt;
&lt;p&gt;And this is just an example amongst many. Another one would be &lt;a href=&quot;https://medium.com/coinmonks/what-is-liquidation-in-defi-lending-and-borrowing-platforms-3326e0ba8d0&quot;&gt;lending to
overcollateralized borrowers&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Hopefully, more areas can benefit from this innovative drive besides finance.
One area that looks promising at the moment is gaming. Increasingly, game
development is financed by the sales of in-game assets (skins, character
customizations, convenience features, ...). One could be hesitant to buy into a
relatively unknown game. Using the blockchain to encode these assets incurs many
benefits: it can be made certain that they won&amp;#39;t disappear at the whim of the
developer, that they are tradeable without the developer investing any resources
to make them so. Even better, another developer could decide to reuse the
assets, and give them a function within his own game.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think the use of blockchain in gaming is at the same stage where
&lt;a href=&quot;https://en.wikipedia.org/wiki/Peer-to-peer&quot;&gt;peer-to-peer&lt;/a&gt; (P2P) technology used to be some 20 years back. P2P had a
terrible reputation as a thing used only to download copyrighted material. Yet
only a few years later it became a common way to distribute big games and their
updates, proving invaluable at handling the load on release day.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or maybe crypto gaming doesn&amp;#39;t work out. Who knows? There are &lt;strong&gt;many&lt;/strong&gt; other
areas in which people are building on the blockchain at the moment. Most
projects will fail, but those who succeed might create immense value (I&amp;#39;m
talking about usefulness, not money), and these wouldn&amp;#39;t have gotten built
without the blockchain.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;I&amp;#39;ll simply recap the thesis: blockchain are decentralized trust engines.
Instead of trusting a single service provider, you trust a majority of the
validators to be honest ‚Äî and they are incentivized to be.&lt;/p&gt;
&lt;p&gt;On decentralized computation blockchains like Ethereum, this enable anybody to
deploy a smart contract, and anybody else to trust that the code will be
executed faithfully (it still requires reading and understanding the code!).&lt;/p&gt;
&lt;p&gt;This enables permissionless innovation: anybody can innovate, not only big
companies with a reputation, or with government sign-off ‚Äî even when money is
involved.&lt;/p&gt;
&lt;p&gt;It also enables anybody to port existing constructions to the blockchain, for
all to take advantage of (e.g. option market-making).&lt;/p&gt;
&lt;p&gt;Hopefully, these innovations will spread outside finance in the future.&lt;/p&gt;
&lt;h2 id=&quot;ps&quot;&gt;PS&lt;/h2&gt;
&lt;p&gt;The subject seems to be momentous, and here are two excellent recent pieces that
harp on the value of decentralization:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://mnot.github.io/avoiding-internet-centralization/draft-nottingham-avoiding-internet-centralization.html&quot;&gt;Avoiding Internet Centralization&lt;/a&gt; talks about the importance of
decentralizing the internet&amp;#39;s infrastructure, but many of its arguments are
valid arguments against centralization in general. (It also makes clear that
blockchains aren&amp;#39;t really the solution for low-level internet infrastructure.)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.chris-granger.com/2021/12/09/is-web3-anything/&quot;&gt;Is Web3... anything?&lt;/a&gt; is similar to this post and explains
blockchains as &amp;quot;a protocol/architecture for near-trustless commitments&amp;quot;.&lt;/li&gt;
&lt;/ul&gt;
      </description>
      <pubDate>2021-12-10T23:00:00.000Z</pubDate>
      <link>http://norswap.com/essence-blockchains</link>
      <guid isPermaLink="true">http://norswap.com/essence-blockchains</guid>
    </item>
  </channel>
</rss>
